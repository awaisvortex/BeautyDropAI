openapi: 3.0.3
info:
  title: Beauty Drop AI API
  version: 1.0.0
  description: AI-powered beauty salon booking marketplace with smart scheduling,
    payments, and service management. Authentication via Clerk.
paths:
  /api/payments/connect/account-link/:
    get:
      operationId: payments_connect_account_link_retrieve
      description: "\n    Get a Stripe onboarding URL for the shop owner.\n    \n\
        \    **This is Step 2 of payment setup:**\n    1. ‚úì Create Connect Account\n\
        \    2. ‚úì Complete onboarding form (you are here)\n    3. Start receiving\
        \ payments\n    \n    Redirect the owner to this URL to complete identity\
        \ verification\n    and bank account setup. The URL expires after a short\
        \ time.\n    "
      summary: Get Onboarding Link
      tags:
      - Payments - Connect
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          description: Onboarding URL returned
        '400':
          description: No Connect account found
  /api/payments/connect/create-account/:
    post:
      operationId: payments_connect_create_account_create
      description: "\n    Create a Stripe Connect Express account for the shop owner.\n\
        \    \n    **This is Step 1 of payment setup:**\n    1. ‚úì Create Connect Account\
        \ (you are here)\n    2. Complete onboarding form\n    3. Start receiving\
        \ payments\n    \n    After creating the account, call the account-link endpoint\
        \ to get the onboarding URL.\n    "
      summary: Create Connect Account
      tags:
      - Payments - Connect
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          description: Account created successfully
        '400':
          description: Account already exists or creation failed
  /api/payments/connect/dashboard/:
    get:
      operationId: payments_connect_dashboard_retrieve
      description: "\n    Get a link to the Stripe Express Dashboard for the shop\
        \ owner.\n    \n    The dashboard allows owners to:\n    - View their earnings\
        \ and transaction history\n    - Check pending payouts and payout schedule\n\
        \    - Update bank account and payout settings\n    - Download tax documents\n\
        \    "
      summary: Get Dashboard Link
      tags:
      - Payments - Connect
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          description: Dashboard URL returned
        '400':
          description: No Connect account found
  /api/payments/connect/status/:
    get:
      operationId: payments_connect_status_retrieve
      description: "\n    Check the status of the shop owner's Connect account.\n\
        \    \n    **Status meanings:**\n    - `charges_enabled: true` = Can receive\
        \ customer payments\n    - `payouts_enabled: true` = Can withdraw to bank\
        \ account\n    - `details_submitted: true` = Completed onboarding form\n \
        \   \n    Returns whether the account can receive payments and any\n    pending\
        \ requirements.\n    "
      summary: Get Connect Account Status
      tags:
      - Payments - Connect
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          description: Account status returned
        '404':
          description: No Connect account found
  /api/v1/agent/chat/:
    post:
      operationId: v1_agent_chat_create
      description: "\n        Send a message to the AI assistant and receive a response.\n\
        \        \n        **Authentication is optional:**\n        - **Guests (no\
        \ auth)**: Can browse shops, view services, check availability\n        -\
        \ **Customers**: Full access - search, book, cancel appointments\n       \
        \ - **Shop Owners**: Manage bookings, view analytics, manage staff\n     \
        \   - **Staff**: View schedule, complete bookings\n        \n        Guest\
        \ users will be prompted to sign in when trying to book or cancel.\n     \
        \   \n        Include `session_id` to continue an existing conversation.\n\
        \        Omit `session_id` to start a new conversation.\n        "
      summary: Chat with AI Agent
      tags:
      - AI Agent
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatRequestRequest'
            examples:
              StartNewConversation:
                value:
                  message: Find me a salon that does haircuts near downtown
                summary: Start a NEW chat (no session_id)
                description: Send a message WITHOUT session_id to start a brand new
                  conversation. The response will include a new session_id that you
                  should save and use for subsequent messages to continue this conversation.
              ContinueConversation:
                value:
                  message: What times are available tomorrow?
                  session_id: 550e8400-e29b-41d4-a716-446655440000
                summary: CONTINUE existing chat (with session_id)
                description: Include the session_id from a previous response to continue
                  that conversation. This allows the AI to remember the conversation
                  history and context, so you can have multi-turn conversations like
                  "book me for 2pm" after asking about available times.
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChatRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChatRequestRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatResponse'
              examples:
                SimpleResponse:
                  value:
                    response: I found 3 salons near downtown that offer haircuts.
                      Would you like me to show you the available times?
                    session_id: 550e8400-e29b-41d4-a716-446655440000
                    message_id: 7c9e6679-7425-40de-944b-e07fc1f90ae7
                    actions_taken: []
                    tokens_used:
                      prompt: 450
                      completion: 85
                  summary: Simple text response
                ResponseWithActions:
                  value:
                    response: |-
                      I found 3 salons near downtown:

                      1. **Andy & Wendi** - 4.8‚òÖ (25 reviews)
                      2. **Test Saloon** - 4.5‚òÖ (12 reviews)
                      3. **NEW SALOON** - 4.2‚òÖ (8 reviews)

                      Would you like to see available times for any of these?
                    session_id: 550e8400-e29b-41d4-a716-446655440000
                    message_id: 7c9e6679-7425-40de-944b-e07fc1f90ae7
                    actions_taken:
                    - action_type: search_shops
                      success: true
                      details:
                        count: 3
                        query: haircuts near downtown
                    tokens_used:
                      prompt: 520
                      completion: 150
                  summary: Response after executing tools
                BookingConfirmation:
                  value:
                    response: |-
                      Your haircut appointment has been booked!

                      üìÖ **December 25, 2024 at 2:00 PM**
                      üè™ Andy & Wendi
                      üíá Haircut ($35)

                      You will receive a confirmation email shortly.
                    session_id: 550e8400-e29b-41d4-a716-446655440000
                    message_id: 7c9e6679-7425-40de-944b-e07fc1f90ae7
                    actions_taken:
                    - action_type: create_booking
                      success: true
                      details:
                        booking_id: 123e4567-e89b-12d3-a456-426614174000
                        shop: Andy & Wendi
                        service: Haircut
                        datetime: '2024-12-25T14:00:00'
                    tokens_used:
                      prompt: 680
                      completion: 95
                  summary: After creating a booking
          description: ''
        '400':
          description: Bad Request
  /api/v1/agent/sessions/:
    get:
      operationId: v1_agent_sessions_list
      description: Get a list of the user's recent chat sessions.
      summary: List chat sessions
      tags:
      - AI Agent
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ChatSessionList'
              examples:
                SessionList:
                  value:
                  - - id: 123e4567-e89b-12d3-a456-426614174000
                      session_id: 550e8400-e29b-41d4-a716-446655440000
                      user_role: customer
                      is_active: true
                      message_count: 8
                      last_message_preview: Your booking has been confirmed for tomorrow
                        at 2pm...
                      created_at: '2024-12-24T10:00:00Z'
                      updated_at: '2024-12-24T10:15:00Z'
                    - id: 456e7890-f12g-34h5-i678-901234567890
                      session_id: 660f9511-f30c-52e5-b827-557766551111
                      user_role: customer
                      is_active: false
                      message_count: 3
                      last_message_preview: Thanks for using BeautyDrop! Have a great
                        day!
                      created_at: '2024-12-23T14:00:00Z'
                      updated_at: '2024-12-23T14:10:00Z'
                  summary: Session list
          description: ''
  /api/v1/agent/sessions/{session_id}/:
    get:
      operationId: v1_agent_sessions_retrieve
      description: Retrieve a specific chat session with all messages.
      summary: Get chat session
      parameters:
      - in: path
        name: session_id
        schema:
          type: string
        required: true
      tags:
      - AI Agent
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatSession'
              examples:
                SessionWithMessages:
                  value:
                    id: 123e4567-e89b-12d3-a456-426614174000
                    session_id: 550e8400-e29b-41d4-a716-446655440000
                    user_email: customer@example.com
                    user_role: customer
                    shop_name: null
                    is_active: true
                    message_count: 4
                    total_tokens_used: 1250
                    summary: ''
                    created_at: '2024-12-24T10:00:00Z'
                    updated_at: '2024-12-24T10:05:00Z'
                    messages:
                    - id: 7c9e6679-7425-40de-944b-e07fc1f90ae7
                      role: user
                      content: Find me salons near downtown
                      tool_name: ''
                      is_error: false
                      error_message: ''
                      tokens_total: 0
                      processing_time_ms: 0
                      created_at: '2024-12-24T10:00:00Z'
                    - id: 8d0f7780-8536-41ef-a55c-f18gd2g01bf8
                      role: assistant
                      content: I found 3 salons near downtown...
                      tool_name: ''
                      is_error: false
                      error_message: ''
                      tokens_total: 535
                      processing_time_ms: 1250
                      created_at: '2024-12-24T10:00:02Z'
                  summary: Session with messages
          description: ''
        '404':
          description: Session not found
    delete:
      operationId: v1_agent_sessions_destroy
      description: Delete a chat session and all its messages.
      summary: Delete chat session
      parameters:
      - in: path
        name: session_id
        schema:
          type: string
        required: true
      tags:
      - AI Agent
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '204':
          description: Session deleted
        '404':
          description: Session not found
  /api/v1/agent/sessions/{session_id}/end/:
    post:
      operationId: v1_agent_sessions_end_create
      description: Mark a chat session as inactive/ended.
      summary: End chat session
      parameters:
      - in: path
        name: session_id
        schema:
          type: string
        required: true
      tags:
      - AI Agent
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          description: Session ended successfully
        '404':
          description: Session not found
  /api/v1/auth/health/:
    get:
      operationId: v1_auth_health_retrieve
      description: Check API health status including database and cache connectivity
      summary: Health check
      tags:
      - System
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthCheck'
          description: ''
  /api/v1/auth/me/:
    get:
      operationId: v1_auth_me_retrieve
      description: Retrieve the currently authenticated user's profile
      summary: Get current user
      tags:
      - Authentication
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
        '401':
          description: Unauthorized
  /api/v1/auth/profile/update/:
    put:
      operationId: v1_auth_profile_update_update
      description: Update the current user's profile information
      summary: Update user profile
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserProfileUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserProfileUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserProfileUpdateRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
    patch:
      operationId: v1_auth_profile_update_partial_update
      description: Update the current user's profile information
      summary: Update user profile
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedUserProfileUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedUserProfileUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedUserProfileUpdateRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
  /api/v1/auth/set-role/:
    post:
      operationId: v1_auth_set_role_create
      description: Set user role as either 'client' (salon owner) or 'customer'. Can
        only be set once.
      summary: Set user role
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
        '400':
          description: Bad Request - Role already set or invalid
        '401':
          description: Unauthorized
  /api/v1/bookings/:
    get:
      operationId: v1_bookings_list
      description: "\n        Get bookings. Customers see their bookings, salon owners\
        \ see their shop bookings.\n        \n        **Payment fields for pending\
        \ bookings:**\n        - `can_pay`: True if booking is pending and within\
        \ 15-minute payment window\n        - `client_secret`: Stripe PaymentIntent\
        \ client secret (only when can_pay=True)\n        - `payment_expires_at`:\
        \ When the payment window expires\n        - `time_remaining_seconds`: Seconds\
        \ remaining to complete payment\n        - `payment_amount`: Advance payment\
        \ amount\n        \n        Use `client_secret` with Stripe.js to show a \"\
        Pay Now\" button on booking cards.\n        "
      summary: List bookings
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - in: query
        name: service
        schema:
          type: string
        description: Filter by service UUID
      - in: query
        name: shop
        schema:
          type: string
        description: Filter by shop UUID
      - in: query
        name: status
        schema:
          type: string
        description: Filter by status
      tags:
      - Bookings - Customer
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBookingListList'
              examples:
                PendingBooking(Payable):
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                      customer_name: John Doe
                      shop_name: Elegant Salon
                      service_name: Haircut & Style
                      deal_name: null
                      item_name: Haircut & Style
                      is_deal_booking: false
                      staff_member_name: Sarah Johnson
                      booking_datetime: '2026-01-15T14:00:00Z'
                      duration_minutes: 45
                      status: pending
                      payment_status: pending
                      can_pay: true
                      client_secret: pi_3Abc123XYz_secret_def456
                      payment_expires_at: '2026-01-14T12:45:00Z'
                      time_remaining_seconds: 845
                      payment_amount: 5.0
                      total_price: '50.00'
                      created_at: '2026-01-14T12:30:00Z'
                  summary: Pending Booking (Payable)
                ConfirmedBooking:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: b2c3d4e5-f6a7-8901-bcde-f12345678901
                      customer_name: Jane Smith
                      shop_name: Elegant Salon
                      service_name: null
                      deal_name: Spa Package
                      item_name: Spa Package
                      is_deal_booking: true
                      staff_member_name: null
                      booking_datetime: '2026-01-16T10:00:00Z'
                      duration_minutes: 90
                      status: confirmed
                      payment_status: paid
                      can_pay: false
                      client_secret: null
                      payment_expires_at: null
                      time_remaining_seconds: null
                      payment_amount: null
                      total_price: '120.00'
                      created_at: '2026-01-13T09:00:00Z'
                  summary: Confirmed Booking
          description: ''
  /api/v1/bookings/{id}/:
    get:
      operationId: v1_bookings_retrieve
      description: Retrieve detailed information about a specific booking
      summary: Get booking details
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Booking.
        required: true
      tags:
      - Bookings - Customer
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Booking'
          description: ''
        '403':
          description: Forbidden
        '404':
          description: Booking not found
  /api/v1/bookings/{id}/cancel/:
    post:
      operationId: v1_bookings_cancel_create
      description: Cancel a booking
      summary: Cancel booking
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Booking.
        required: true
      tags:
      - Bookings - Customer
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Booking'
          description: ''
        '400':
          description: Bad Request - Cannot cancel this booking
        '403':
          description: Forbidden
        '404':
          description: Booking not found
  /api/v1/bookings/{id}/complete/:
    post:
      operationId: v1_bookings_complete_create
      description: Mark booking as completed (salon owners only)
      summary: Complete booking
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Booking.
        required: true
      tags:
      - Bookings - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Booking'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Booking not found
  /api/v1/bookings/{id}/confirm/:
    post:
      operationId: v1_bookings_confirm_create
      description: Confirm a booking (salon owners only)
      summary: Confirm booking
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Booking.
        required: true
      tags:
      - Bookings - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Booking'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Booking not found
  /api/v1/bookings/{id}/no_show/:
    post:
      operationId: v1_bookings_no_show_create
      description: Mark booking as no-show (salon owners only)
      summary: Mark as no-show
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Booking.
        required: true
      tags:
      - Bookings - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Booking'
          description: ''
        '403':
          description: Forbidden
        '404':
          description: Booking not found
  /api/v1/bookings/{id}/payment-info/:
    get:
      operationId: v1_bookings_payment_info_retrieve
      description: "\n        Retrieve payment information for a pending booking.\n\
        \        \n        Returns the client_secret for Stripe.js to complete payment,\n\
        \        along with expiry time and remaining window.\n        \n        **Use\
        \ cases:**\n        - Customer wants to pay for a pending booking\n      \
        \  - Voice agent directed customer to pay via bookings page\n        - Frontend\
        \ needs to show \"Pay Now\" button\n        \n        **Payment Window:**\n\
        \        - Payment must be completed within 15 minutes of booking creation\n\
        \        - After expiry, booking is automatically cancelled\n        "
      summary: Get payment info for pending booking
      parameters:
      - in: path
        name: id
        schema:
          type: string
        description: UUID of the booking to get payment info for
        required: true
      tags:
      - Bookings - Customer
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentRetrieval'
              examples:
                PaymentInfoResponse:
                  value:
                    booking_id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                    client_secret: pi_3Abc123XYz_secret_def456
                    payment_intent_id: pi_3Abc123XYz
                    amount: 5.0
                    currency: usd
                    expires_at: '2026-01-14T12:45:00Z'
                    time_remaining_seconds: 845
                    can_pay: true
                  summary: Payment Info Response
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentError'
          description: ''
        '403':
          description: Forbidden - Not your booking
        '404':
          description: Booking not found
  /api/v1/bookings/{id}/reassign_staff/:
    post:
      operationId: v1_bookings_reassign_staff_create
      description: "\n        Reassign a booking to a different staff member.\n  \
        \      \n        **Validation:**\n        - Cannot reassign to the same staff\
        \ member\n        - New staff must be able to provide the service\n      \
        \  - New staff must be available at the booking time (no clashes)\n      \
        \  - A staff member must always be assigned (cannot remove without replacement)\n\
        \        \n        **Automatic behavior:**\n        - Previous staff's schedule\
        \ is freed at this time\n        - New staff's schedule is blocked for this\
        \ booking\n        "
      summary: Reassign staff (Owner)
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Booking.
        required: true
      tags:
      - Bookings - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StaffReassignRequest'
            examples:
              ReassignStaff:
                value:
                  staff_member_id: b9743cc7-1364-4a32-a3b7-730a02365f00
                summary: Reassign Staff
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StaffReassignRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StaffReassignRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Staff reassigned from John to Jane
                  previous_staff:
                    type: string
                    example: John Doe
                  new_staff:
                    type: string
                    example: Jane Smith
                  booking:
                    type: object
          description: Staff reassigned successfully
        '400':
          description: Bad Request - Same staff, staff unavailable, or cannot provide
            service
        '403':
          description: Forbidden - Not shop owner
        '404':
          description: Booking or staff not found
  /api/v1/bookings/{id}/reschedule/:
    post:
      operationId: v1_bookings_reschedule_create
      description: "\n        Reschedule a booking to a new date/time.\n        \n\
        \        **Validation:**\n        - Date cannot be in the past\n        -\
        \ Shop must be open on the new date\n        - New time slot must be available\n\
        \        - If assigned staff is not available at new time, will auto-reassign\
        \ to available staff\n        "
      summary: Reschedule booking (Owner)
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Booking.
        required: true
      tags:
      - Bookings - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OwnerRescheduleRequest'
            examples:
              RescheduleBooking:
                value:
                  date: '2024-12-20'
                  start_time: '14:00'
                summary: Reschedule Booking
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/OwnerRescheduleRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/OwnerRescheduleRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Booking'
          description: ''
        '400':
          description: Bad Request - Slot not available or shop closed
        '403':
          description: Forbidden - Not shop owner
        '404':
          description: Booking not found
  /api/v1/bookings/deal_slots/:
    get:
      operationId: v1_bookings_deal_slots_retrieve
      description: "\n        Get available time slots for a deal booking.\n     \
        \   \n        Deal slots are based on shop hours with capacity limits.\n \
        \       Each slot shows `slots_left` (out of max_concurrent_deal_bookings).\n\
        \        \n        **Key differences from service availability:**\n      \
        \  - No staff required (just shop hours + capacity)\n        - `slots_left`\
        \ shows remaining capacity at each time\n        "
      summary: Get deal availability slots
      parameters:
      - in: query
        name: date
        schema:
          type: string
        description: Date (YYYY-MM-DD)
        required: true
      - in: query
        name: deal_id
        schema:
          type: string
        description: UUID of the deal
        required: true
      tags:
      - Deals - Booking
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DealAvailability'
          description: ''
        '400':
          description: Bad Request - Invalid deal or date
        '404':
          description: Deal not found
  /api/v1/bookings/dynamic_book/:
    post:
      operationId: v1_bookings_dynamic_book_create
      description: "\n        Create a booking without requiring a pre-created TimeSlot.\n\
        \        \n        Uses dynamic availability to validate the slot and create\
        \ the booking.\n        This is the recommended endpoint for new booking implementations.\n\
        \        \n        The system will:\n        1. Validate the slot is within\
        \ shop hours\n        2. Check staff availability for the requested time\n\
        \        3. Auto-assign or use specified staff member\n        4. Create the\
        \ booking with 'pending' status\n        5. Create a payment intent if Stripe\
        \ Connect is enabled\n        \n        **Payment Flow:**\n        - If shop\
        \ owner has Stripe Connect enabled: Returns `client_secret` for payment\n\
        \        - If shop doesn't have Stripe Connect: Booking is auto-confirmed\n\
        \        - If advance payment is disabled: Booking is auto-confirmed\n   \
        \     \n        **Response includes:**\n        - Booking details\n      \
        \  - Payment object with either:\n          - `client_secret` for Stripe.js\
        \ (when payment required)\n          - Confirmation message (when no payment\
        \ required)\n        "
      summary: Dynamic booking (no TimeSlot required)
      tags:
      - Bookings - Customer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DynamicBookingCreateRequest'
            examples:
              DynamicBookingExample:
                value:
                  service_id: d241ec69-f739-4040-94a0-b46286742dbe
                  date: '2024-12-10'
                  start_time: '10:00'
                  staff_member_id: b9743cc7-1364-4a32-a3b7-730a02365f00
                  notes: Please call me when you arrive
                summary: Dynamic Booking Example
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DynamicBookingCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DynamicBookingCreateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BookingWithPaymentResponse'
              examples:
                ResponseWithPaymentRequired:
                  value:
                    id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                    status: pending
                    service:
                      id: d241ec69...
                      name: Haircut
                    booking_datetime: '2024-12-10T10:00:00Z'
                    total_price: '50.00'
                    payment:
                      required: true
                      client_secret: pi_xxx_secret_yyy
                      payment_intent_id: pi_xxx
                      amount: 5.0
                      amount_cents: 500
                      currency: usd
                      message: Your slot is reserved for 15 minutes. Please complete
                        payment within this time to confirm your booking.
                  summary: Response with Payment Required
                ResponseWithoutPaymentRequired:
                  value:
                    id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                    status: confirmed
                    service:
                      id: d241ec69...
                      name: Haircut
                    booking_datetime: '2024-12-10T10:00:00Z'
                    total_price: '50.00'
                    payment:
                      required: false
                      message: Shop payment setup incomplete - booking created without
                        deposit
                  summary: Response without Payment Required
          description: ''
        '400':
          description: Bad Request - Slot not available or invalid data
        '403':
          description: Forbidden - Only customers can create bookings
  /api/v1/bookings/dynamic_book_deal/:
    post:
      operationId: v1_bookings_dynamic_book_deal_create
      description: "\n        Create a deal booking without staff assignment.\n  \
        \      \n        Deal bookings are capacity-based (no staff required) and\
        \ use the shop's\n        max_concurrent_deal_bookings setting.\n        \n\
        \        The system will:\n        1. Validate the slot is within shop hours\n\
        \        2. Check capacity at the requested time\n        3. Create the booking\
        \ with 'pending' status\n        4. Create a payment intent if Stripe Connect\
        \ is enabled\n        \n        **Payment Flow:**\n        - If shop owner\
        \ has Stripe Connect enabled: Returns `client_secret` for payment\n      \
        \  - If shop doesn't have Stripe Connect: Booking is auto-confirmed\n    \
        \    - If advance payment is disabled: Booking is auto-confirmed\n       \
        \ \n        **Response includes:**\n        - Booking details (with deal information)\n\
        \        - Payment object with either:\n          - `client_secret` for Stripe.js\
        \ (when payment required)\n          - Confirmation message (when no payment\
        \ required)\n        "
      summary: Dynamic booking for deals
      tags:
      - Bookings - Customer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DealBookingCreateRequest'
            examples:
              DealBookingRequest:
                value:
                  deal_id: f9e8d7c6b5a4-3210-fedc-ba98-76543210fedc
                  date: '2024-12-15'
                  start_time: '14:00'
                  duration_minutes: 90
                  notes: Birthday celebration
                summary: Deal Booking Request
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DealBookingCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DealBookingCreateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BookingWithPaymentResponse'
              examples:
                ResponseWithPaymentRequired:
                  value:
                    id: booking123
                    status: pending
                    deal:
                      id: deal123
                      name: Spa Package
                    booking_datetime: '2024-12-15T14:00:00Z'
                    total_price: '120.00'
                    payment:
                      required: true
                      client_secret: pi_xxx_secret_yyy
                      payment_intent_id: pi_xxx
                      amount: 12.0
                      amount_cents: 1200
                      currency: usd
                      message: Your slot is reserved for 15 minutes. Please complete
                        payment within this time to confirm your booking.
                  summary: Response with Payment Required
          description: ''
        '400':
          description: No slots available or invalid data
        '403':
          description: Forbidden - Only customers can create bookings
  /api/v1/bookings/my_bookings/:
    get:
      operationId: v1_bookings_my_bookings_list
      description: Get current customer's booking history
      summary: My bookings
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - in: query
        name: service
        schema:
          type: string
          format: uuid
      - in: query
        name: shop
        schema:
          type: string
          format: uuid
      - in: query
        name: status
        schema:
          type: string
          enum:
          - cancelled
          - completed
          - confirmed
          - no_show
          - pending
        description: |-
          * `pending` - Pending
          * `confirmed` - Confirmed
          * `cancelled` - Cancelled
          * `completed` - Completed
          * `no_show` - No Show
      tags:
      - Bookings - Customer
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBookingListList'
              examples:
                PendingBooking(Payable):
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                      customer_name: John Doe
                      shop_name: Elegant Salon
                      service_name: Haircut & Style
                      deal_name: null
                      item_name: Haircut & Style
                      is_deal_booking: false
                      staff_member_name: Sarah Johnson
                      booking_datetime: '2026-01-15T14:00:00Z'
                      duration_minutes: 45
                      status: pending
                      payment_status: pending
                      can_pay: true
                      client_secret: pi_3Abc123XYz_secret_def456
                      payment_expires_at: '2026-01-14T12:45:00Z'
                      time_remaining_seconds: 845
                      payment_amount: 5.0
                      total_price: '50.00'
                      created_at: '2026-01-14T12:30:00Z'
                  summary: Pending Booking (Payable)
                ConfirmedBooking:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: b2c3d4e5-f6a7-8901-bcde-f12345678901
                      customer_name: Jane Smith
                      shop_name: Elegant Salon
                      service_name: null
                      deal_name: Spa Package
                      item_name: Spa Package
                      is_deal_booking: true
                      staff_member_name: null
                      booking_datetime: '2026-01-16T10:00:00Z'
                      duration_minutes: 90
                      status: confirmed
                      payment_status: paid
                      can_pay: false
                      client_secret: null
                      payment_expires_at: null
                      time_remaining_seconds: null
                      payment_amount: null
                      total_price: '120.00'
                      created_at: '2026-01-13T09:00:00Z'
                  summary: Confirmed Booking
          description: ''
  /api/v1/bookings/my_stats/:
    get:
      operationId: v1_bookings_my_stats_retrieve
      description: Get current customer's booking statistics including upcoming count
        and total spending
      summary: My booking stats
      tags:
      - Bookings - Customer
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerBookingStats'
          description: ''
  /api/v1/bookings/shop/{shop_id}/:
    get:
      operationId: v1_bookings_shop_list
      description: Get all bookings for a specific shop (salon owners only)
      summary: Shop bookings
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - in: query
        name: service
        schema:
          type: string
          format: uuid
      - in: query
        name: shop
        schema:
          type: string
          format: uuid
      - in: path
        name: shop_id
        schema:
          type: string
          format: uuid
        required: true
      - in: query
        name: status
        schema:
          type: string
        description: Filter by status
      tags:
      - Bookings - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBookingListList'
              examples:
                PendingBooking(Payable):
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                      customer_name: John Doe
                      shop_name: Elegant Salon
                      service_name: Haircut & Style
                      deal_name: null
                      item_name: Haircut & Style
                      is_deal_booking: false
                      staff_member_name: Sarah Johnson
                      booking_datetime: '2026-01-15T14:00:00Z'
                      duration_minutes: 45
                      status: pending
                      payment_status: pending
                      can_pay: true
                      client_secret: pi_3Abc123XYz_secret_def456
                      payment_expires_at: '2026-01-14T12:45:00Z'
                      time_remaining_seconds: 845
                      payment_amount: 5.0
                      total_price: '50.00'
                      created_at: '2026-01-14T12:30:00Z'
                  summary: Pending Booking (Payable)
                ConfirmedBooking:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: b2c3d4e5-f6a7-8901-bcde-f12345678901
                      customer_name: Jane Smith
                      shop_name: Elegant Salon
                      service_name: null
                      deal_name: Spa Package
                      item_name: Spa Package
                      is_deal_booking: true
                      staff_member_name: null
                      booking_datetime: '2026-01-16T10:00:00Z'
                      duration_minutes: 90
                      status: confirmed
                      payment_status: paid
                      can_pay: false
                      client_secret: null
                      payment_expires_at: null
                      time_remaining_seconds: null
                      payment_amount: null
                      total_price: '120.00'
                      created_at: '2026-01-13T09:00:00Z'
                  summary: Confirmed Booking
          description: ''
  /api/v1/bookings/shop/{shop_id}/stats/:
    get:
      operationId: v1_bookings_shop_stats_retrieve
      description: Get booking statistics for a shop (salon owners only)
      summary: Booking statistics
      parameters:
      - in: path
        name: shop_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - Bookings - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BookingStats'
          description: ''
  /api/v1/bookings/shop/{shop_id}/today/:
    get:
      operationId: v1_bookings_shop_today_list
      description: Get today's bookings for a shop (salon owners only)
      summary: Today's bookings
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - in: query
        name: service
        schema:
          type: string
          format: uuid
      - in: query
        name: shop
        schema:
          type: string
          format: uuid
      - in: path
        name: shop_id
        schema:
          type: string
          format: uuid
        required: true
      - in: query
        name: status
        schema:
          type: string
          enum:
          - cancelled
          - completed
          - confirmed
          - no_show
          - pending
        description: |-
          * `pending` - Pending
          * `confirmed` - Confirmed
          * `cancelled` - Cancelled
          * `completed` - Completed
          * `no_show` - No Show
      tags:
      - Bookings - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBookingListList'
              examples:
                PendingBooking(Payable):
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                      customer_name: John Doe
                      shop_name: Elegant Salon
                      service_name: Haircut & Style
                      deal_name: null
                      item_name: Haircut & Style
                      is_deal_booking: false
                      staff_member_name: Sarah Johnson
                      booking_datetime: '2026-01-15T14:00:00Z'
                      duration_minutes: 45
                      status: pending
                      payment_status: pending
                      can_pay: true
                      client_secret: pi_3Abc123XYz_secret_def456
                      payment_expires_at: '2026-01-14T12:45:00Z'
                      time_remaining_seconds: 845
                      payment_amount: 5.0
                      total_price: '50.00'
                      created_at: '2026-01-14T12:30:00Z'
                  summary: Pending Booking (Payable)
                ConfirmedBooking:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: b2c3d4e5-f6a7-8901-bcde-f12345678901
                      customer_name: Jane Smith
                      shop_name: Elegant Salon
                      service_name: null
                      deal_name: Spa Package
                      item_name: Spa Package
                      is_deal_booking: true
                      staff_member_name: null
                      booking_datetime: '2026-01-16T10:00:00Z'
                      duration_minutes: 90
                      status: confirmed
                      payment_status: paid
                      can_pay: false
                      client_secret: null
                      payment_expires_at: null
                      time_remaining_seconds: null
                      payment_amount: null
                      total_price: '120.00'
                      created_at: '2026-01-13T09:00:00Z'
                  summary: Confirmed Booking
          description: ''
  /api/v1/bookings/shop/{shop_id}/upcoming/:
    get:
      operationId: v1_bookings_shop_upcoming_list
      description: Get upcoming bookings for a shop (salon owners only)
      summary: Upcoming bookings
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - in: query
        name: service
        schema:
          type: string
          format: uuid
      - in: query
        name: shop
        schema:
          type: string
          format: uuid
      - in: path
        name: shop_id
        schema:
          type: string
          format: uuid
        required: true
      - in: query
        name: status
        schema:
          type: string
          enum:
          - cancelled
          - completed
          - confirmed
          - no_show
          - pending
        description: |-
          * `pending` - Pending
          * `confirmed` - Confirmed
          * `cancelled` - Cancelled
          * `completed` - Completed
          * `no_show` - No Show
      tags:
      - Bookings - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBookingListList'
              examples:
                PendingBooking(Payable):
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                      customer_name: John Doe
                      shop_name: Elegant Salon
                      service_name: Haircut & Style
                      deal_name: null
                      item_name: Haircut & Style
                      is_deal_booking: false
                      staff_member_name: Sarah Johnson
                      booking_datetime: '2026-01-15T14:00:00Z'
                      duration_minutes: 45
                      status: pending
                      payment_status: pending
                      can_pay: true
                      client_secret: pi_3Abc123XYz_secret_def456
                      payment_expires_at: '2026-01-14T12:45:00Z'
                      time_remaining_seconds: 845
                      payment_amount: 5.0
                      total_price: '50.00'
                      created_at: '2026-01-14T12:30:00Z'
                  summary: Pending Booking (Payable)
                ConfirmedBooking:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: b2c3d4e5-f6a7-8901-bcde-f12345678901
                      customer_name: Jane Smith
                      shop_name: Elegant Salon
                      service_name: null
                      deal_name: Spa Package
                      item_name: Spa Package
                      is_deal_booking: true
                      staff_member_name: null
                      booking_datetime: '2026-01-16T10:00:00Z'
                      duration_minutes: 90
                      status: confirmed
                      payment_status: paid
                      can_pay: false
                      client_secret: null
                      payment_expires_at: null
                      time_remaining_seconds: null
                      payment_amount: null
                      total_price: '120.00'
                      created_at: '2026-01-13T09:00:00Z'
                  summary: Confirmed Booking
          description: ''
  /api/v1/calendars/calendars/:
    get:
      operationId: v1_calendars_calendars_list
      description: Get list of available Google Calendars. Use this to let users choose
        which calendar to sync bookings to. The 'id' field is what you pass to update_settings.
      summary: List Google Calendars
      tags:
      - Calendars
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/GoogleCalendarList'
              examples:
                GoogleCalendarsList:
                  value:
                  - - id: primary
                      summary: My Calendar
                      primary: true
                    - id: work@group.calendar.google.com
                      summary: Work Calendar
                      primary: false
                  summary: Available calendars for the user
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
  /api/v1/calendars/google/connect/:
    post:
      operationId: v1_calendars_google_connect_create
      description: "\n        Connect Google Calendar using OAuth tokens fetched automatically\
        \ from Clerk.\n        \n        **Prerequisites:**\n        - You must be\
        \ signed in with Google via Clerk SSO\n        - Calendar permissions must\
        \ be granted during sign-in\n        \n        **If connection fails:**\n\
        \        - Sign out and sign back in using Google\n        - Make sure to\
        \ allow calendar access when prompted\n        "
      summary: Connect Google Calendar
      tags:
      - Calendars
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CalendarIntegration'
              examples:
                ConnectedCalendar:
                  value:
                    is_connected: true
                    google_calendar_id: primary
                    is_sync_enabled: true
                    last_sync_at: '2024-12-10T10:30:00Z'
                  summary: User has connected Google Calendar
                NotConnected:
                  value:
                    is_connected: false
                    google_calendar_id: primary
                    is_sync_enabled: false
                    last_sync_at: null
                  summary: User has not connected any calendar
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
  /api/v1/calendars/google/disconnect/:
    post:
      operationId: v1_calendars_google_disconnect_create
      description: Remove Google Calendar integration and stop syncing bookings. Your
        calendar events created by this app will remain.
      summary: Disconnect Google Calendar
      tags:
      - Calendars
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'
          description: ''
  /api/v1/calendars/settings/:
    patch:
      operationId: v1_calendars_settings_partial_update
      description: Update sync preferences like which calendar to sync to and whether
        sync is enabled.
      summary: Update Calendar Settings
      tags:
      - Calendars
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedCalendarSettingsRequest'
            examples:
              UpdateCalendarSettings:
                value:
                  google_calendar_id: work@group.calendar.google.com
                  is_sync_enabled: true
                summary: Change sync settings
              DisableSync:
                value:
                  is_sync_enabled: false
                summary: Disable automatic syncing
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedCalendarSettingsRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedCalendarSettingsRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CalendarIntegration'
              examples:
                ConnectedCalendar:
                  value:
                    is_connected: true
                    google_calendar_id: primary
                    is_sync_enabled: true
                    last_sync_at: '2024-12-10T10:30:00Z'
                  summary: User has connected Google Calendar
                NotConnected:
                  value:
                    is_connected: false
                    google_calendar_id: primary
                    is_sync_enabled: false
                    last_sync_at: null
                  summary: User has not connected any calendar
          description: ''
  /api/v1/calendars/status/:
    get:
      operationId: v1_calendars_status_retrieve
      description: Get the current user's calendar integration status. Check if Google
        Calendar is connected and syncing.
      summary: Get Calendar Integration Status
      tags:
      - Calendars
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CalendarIntegration'
              examples:
                ConnectedCalendar:
                  value:
                    is_connected: true
                    google_calendar_id: primary
                    is_sync_enabled: true
                    last_sync_at: '2024-12-10T10:30:00Z'
                  summary: User has connected Google Calendar
                NotConnected:
                  value:
                    is_connected: false
                    google_calendar_id: primary
                    is_sync_enabled: false
                    last_sync_at: null
                  summary: User has not connected any calendar
          description: ''
  /api/v1/calendars/sync/:
    post:
      operationId: v1_calendars_sync_create
      description: Manually sync all future confirmed bookings to Google Calendar.
        The sync runs in the background - you'll see events appear within a few minutes.
      summary: Sync All Bookings
      tags:
      - Calendars
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '202':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
  /api/v1/clients/:
    get:
      operationId: v1_clients_list
      description: |-
        ViewSet for Client model.

        Includes client profile management and earnings statistics.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - v1
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedClientList'
          description: ''
    post:
      operationId: v1_clients_create
      description: |-
        ViewSet for Client model.

        Includes client profile management and earnings statistics.
      tags:
      - v1
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientCreateUpdateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientCreateUpdate'
          description: ''
  /api/v1/clients/{id}/:
    get:
      operationId: v1_clients_retrieve
      description: |-
        ViewSet for Client model.

        Includes client profile management and earnings statistics.
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Client.
        required: true
      tags:
      - v1
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
          description: ''
    put:
      operationId: v1_clients_update
      description: |-
        ViewSet for Client model.

        Includes client profile management and earnings statistics.
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Client.
        required: true
      tags:
      - v1
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientCreateUpdateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientCreateUpdate'
          description: ''
    patch:
      operationId: v1_clients_partial_update
      description: |-
        ViewSet for Client model.

        Includes client profile management and earnings statistics.
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Client.
        required: true
      tags:
      - v1
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientCreateUpdateRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientCreateUpdate'
          description: ''
    delete:
      operationId: v1_clients_destroy
      description: |-
        ViewSet for Client model.

        Includes client profile management and earnings statistics.
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Client.
        required: true
      tags:
      - v1
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '204':
          description: No response body
  /api/v1/clients/me/:
    get:
      operationId: v1_clients_me_retrieve
      description: Get the current client's (salon owner's) profile
      summary: Get my profile
      tags:
      - Clients
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Client'
          description: ''
  /api/v1/clients/total-earnings/:
    get:
      operationId: v1_clients_total_earnings_retrieve
      description: "\n        Get the total earnings for the authenticated client\
        \ (salon owner) across ALL their shops.\n        \n        Returns:\n    \
        \    - Grand total of earnings from completed bookings\n        - Number of\
        \ shops owned\n        - Total completed bookings count\n        - Breakdown\
        \ of earnings per shop\n        \n        Earnings are calculated from the\
        \ `total_price` of completed bookings.\n        When a new shop is created,\
        \ it will automatically be included in subsequent calls.\n        "
      summary: Total earnings across all shops
      tags:
      - Clients
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientTotalEarnings'
              examples:
                ClientTotalEarnings:
                  value:
                    total_earnings: 15450.5
                    total_advance_payments: 1545.05
                    total_shops: 3
                    total_completed_bookings: 156
                    shops:
                    - shop_id: e188f3d1-921d-4261-9ea5-d6cfad62962a
                      shop_name: Downtown Beauty Salon
                      total_bookings: 100
                      completed_bookings: 75
                      total_earnings: 8500.0
                      total_advance_payments: 850.0
                    - shop_id: f299g4e2-a32e-5372-0fb6-e7dgbe073f3b
                      shop_name: Uptown Spa
                      total_bookings: 80
                      completed_bookings: 56
                      total_earnings: 4950.5
                      total_advance_payments: 495.05
                    - shop_id: g310h5f3-b43f-6483-1gc7-f8ehcf184g4c
                      shop_name: Mall Salon
                      total_bookings: 40
                      completed_bookings: 25
                      total_earnings: 2000.0
                      total_advance_payments: 200.0
                  summary: Client Total Earnings
          description: ''
        '404':
          description: Client profile not found
  /api/v1/customers/favorites/:
    get:
      operationId: v1_customers_favorites_list
      description: Get list of all shops the customer has marked as favorite
      summary: Get favorite shops
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - Customers
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedShopList'
          description: ''
  /api/v1/customers/favorites/{shop_id}/add/:
    post:
      operationId: v1_customers_favorites_add_create
      description: Add a shop to the customer's favorites list
      summary: Add shop to favorites
      parameters:
      - in: path
        name: shop_id
        schema:
          type: string
        required: true
      tags:
      - Customers
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                description: Shop added to favorites
              examples:
                SuccessResponse:
                  value:
                    message: Shop added to favorites
                    shop_id: e188f3d1-921d-4261-9ea5-d6cfad62962a
                    shop_name: Elegant Salon
                    favorites_count: 5
                  summary: Success Response
          description: ''
        '400':
          description: Shop already in favorites
        '404':
          description: Shop not found
  /api/v1/customers/favorites/{shop_id}/remove/:
    post:
      operationId: v1_customers_favorites_remove_create
      description: Remove a shop from the customer's favorites list
      summary: Remove shop from favorites
      parameters:
      - in: path
        name: shop_id
        schema:
          type: string
        required: true
      tags:
      - Customers
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                description: Shop removed from favorites
              examples:
                SuccessResponse:
                  value:
                    message: Shop removed from favorites
                    shop_id: e188f3d1-921d-4261-9ea5-d6cfad62962a
                    favorites_count: 4
                  summary: Success Response
          description: ''
        '400':
          description: Shop not in favorites
        '404':
          description: Shop not found
  /api/v1/customers/favorites/{shop_id}/toggle/:
    post:
      operationId: v1_customers_favorites_toggle_create
      description: Toggle a shop's favorite status. Adds if not in favorites, removes
        if already favorited.
      summary: Toggle shop favorite
      parameters:
      - in: path
        name: shop_id
        schema:
          type: string
        required: true
      tags:
      - Customers
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                description: Favorite status toggled
              examples:
                AddedToFavorites:
                  value:
                    message: Shop added to favorites
                    shop_id: e188f3d1-921d-4261-9ea5-d6cfad62962a
                    shop_name: Elegant Salon
                    is_favorite: true
                    favorites_count: 5
                  summary: Added to favorites
                RemovedFromFavorites:
                  value:
                    message: Shop removed from favorites
                    shop_id: e188f3d1-921d-4261-9ea5-d6cfad62962a
                    shop_name: Elegant Salon
                    is_favorite: false
                    favorites_count: 4
                  summary: Removed from favorites
          description: ''
        '404':
          description: Shop not found
  /api/v1/customers/me/:
    get:
      operationId: v1_customers_me_retrieve
      description: Get the current customer's profile
      summary: Get my profile
      tags:
      - Customers
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
          description: ''
  /api/v1/notifications/:
    get:
      operationId: v1_notifications_list
      description: Get paginated list of notifications for the current user.
      summary: List notifications
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - Notifications
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedNotificationList'
          description: ''
  /api/v1/notifications/{id}/:
    delete:
      operationId: v1_notifications_destroy
      description: Delete a specific notification.
      summary: Delete notification
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - Notifications
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteNotificationResponse'
          description: ''
  /api/v1/notifications/count/:
    get:
      operationId: v1_notifications_count_retrieve
      description: Get total and unread notification counts.
      summary: Get notification counts
      tags:
      - Notifications
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationCount'
          description: ''
  /api/v1/notifications/fcm-token/:
    post:
      operationId: v1_notifications_fcm_token_create
      description: "\n    Register a Firebase Cloud Messaging device token for push\
        \ notifications.\n    \n    The frontend should call this endpoint:\n    -\
        \ After user login\n    - When the FCM token refreshes\n    - When the app\
        \ gains notification permissions\n    \n    If the token already exists for\
        \ a different user, it will be reassigned to the current user.\n    "
      summary: Register FCM device token
      tags:
      - Notifications
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FCMTokenRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/FCMTokenRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FCMTokenRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FCMTokenResponse'
          description: ''
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FCMTokenResponse'
          description: ''
    delete:
      operationId: v1_notifications_fcm_token_destroy
      description: Remove a device token when user logs out or disables notifications.
      summary: Unregister FCM device token
      tags:
      - Notifications
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FCMTokenResponse'
          description: ''
  /api/v1/notifications/mark-all-read/:
    post:
      operationId: v1_notifications_mark_all_read_create
      description: Mark all unread notifications as read for the current user.
      summary: Mark all notifications as read
      tags:
      - Notifications
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MarkNotificationReadResponse'
          description: ''
  /api/v1/notifications/mark-read/:
    post:
      operationId: v1_notifications_mark_read_create
      description: Mark specific or all notifications as read.
      summary: Mark notifications read
      tags:
      - Notifications
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MarkNotificationReadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MarkNotificationReadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MarkNotificationReadRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MarkNotificationReadResponse'
          description: ''
  /api/v1/notifications/preferences/:
    get:
      operationId: v1_notifications_preferences_retrieve
      description: Get the current user's email and push notification preferences.
      summary: Get notification preferences
      tags:
      - Notifications
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationPreference'
          description: ''
    put:
      operationId: v1_notifications_preferences_update
      description: Update all notification preferences for the current user.
      summary: Update notification preferences
      tags:
      - Notifications
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NotificationPreferenceRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/NotificationPreferenceRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/NotificationPreferenceRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationPreference'
          description: ''
    patch:
      operationId: v1_notifications_preferences_partial_update
      description: Update specific notification preferences. Only send the fields
        you want to change.
      summary: Partially update notification preferences
      tags:
      - Notifications
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedNotificationPreferenceRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedNotificationPreferenceRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedNotificationPreferenceRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationPreference'
          description: ''
  /api/v1/notifications/test-email/:
    post:
      operationId: v1_notifications_test_email_create
      description: Send a test email to verify email configuration is working.
      summary: Send test email
      tags:
      - Notifications
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TestEmailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TestEmailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TestEmailRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TestEmailResponse'
          description: ''
  /api/v1/schedules/holidays/:
    get:
      operationId: v1_schedules_holidays_list
      description: Get holidays for a shop. Filter by shop_id and optional date range.
      summary: List holidays
      parameters:
      - in: query
        name: end_date
        schema:
          type: string
        description: Filter holidays on or before this date (YYYY-MM-DD)
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      - in: query
        name: shop_id
        schema:
          type: string
          format: uuid
        description: Filter by shop ID (required for non-owners)
      - in: query
        name: start_date
        schema:
          type: string
        description: Filter holidays on or after this date (YYYY-MM-DD)
      tags:
      - Holidays - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedHolidayList'
          description: ''
  /api/v1/schedules/holidays/bulk_create/:
    post:
      operationId: v1_schedules_holidays_bulk_create_create
      description: "\n        Mark dates as holidays for a shop.\n        \n     \
        \   Supports two input formats:\n        - **dates**: List of specific dates\
        \ (e.g., ['2024-12-25', '2024-12-26'])\n        - **start_date + end_date**:\
        \ Date range (inclusive)\n        \n        Holidays block all bookings on\
        \ those dates.\n        Existing holidays for the same dates are skipped (not\
        \ duplicated).\n        "
      summary: Add holidays (bulk create)
      tags:
      - Holidays - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HolidayCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/HolidayCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/HolidayCreateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HolidayBulkResponse'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Shop not found
  /api/v1/schedules/holidays/bulk_delete/:
    post:
      operationId: v1_schedules_holidays_bulk_delete_create
      description: "\n        Remove holiday dates for a shop.\n        \n       \
        \ Supports two input formats:\n        - **dates**: List of specific dates\
        \ to remove\n        - **start_date + end_date**: Date range to remove (inclusive)\n\
        \        "
      summary: Remove holidays (bulk delete)
      tags:
      - Holidays - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HolidayDeleteRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/HolidayDeleteRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/HolidayDeleteRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HolidayDeleteResponse'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Shop not found
  /api/v1/schedules/shop-schedules/:
    get:
      operationId: v1_schedules_shop_schedules_list
      description: Get shop schedules. Filter by shop_id to get schedules for a specific
        shop.
      summary: List shop schedules
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      - in: query
        name: shop_id
        schema:
          type: string
          format: uuid
        description: Filter by shop ID
      tags:
      - Schedules - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedShopScheduleList'
          description: ''
  /api/v1/schedules/shop-schedules/bulk_create/:
    post:
      operationId: v1_schedules_shop_schedules_bulk_create_create
      description: "\n        Set shop hours for multiple days at once.\n        \n\
        \        Select any days you want - they don't need to be sequential.\n  \
        \      Example: Set Monday, Wednesday, Friday 9AM-6PM in one call.\n     \
        \   Existing schedules for those days will be updated automatically.\n   \
        \     "
      summary: Set shop hours (bulk create/update)
      tags:
      - Schedules - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkScheduleCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/BulkScheduleCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/BulkScheduleCreateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BulkScheduleResponse'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Shop not found
  /api/v1/schedules/time-slots/:
    get:
      operationId: v1_schedules_time_slots_list
      description: Get manually created time slots. Use dynamic_availability for available
        booking slots.
      summary: List manual time slots
      parameters:
      - in: query
        name: date
        schema:
          type: string
        description: Filter by date (YYYY-MM-DD)
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      - in: query
        name: shop_id
        schema:
          type: string
          format: uuid
        description: Filter by shop ID
      - in: query
        name: status
        schema:
          type: string
        description: Filter by status (available, booked, blocked)
      tags:
      - Schedules - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedTimeSlotList'
          description: ''
  /api/v1/schedules/time-slots/{id}/block/:
    post:
      operationId: v1_schedules_time_slots_block_create
      description: Block a time slot (salon owners only)
      summary: Block time slot
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Time Slot.
        required: true
      tags:
      - Schedules - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TimeSlotBlockRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TimeSlotBlockRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TimeSlotBlockRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimeSlot'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Time slot not found
  /api/v1/schedules/time-slots/{id}/unblock/:
    post:
      operationId: v1_schedules_time_slots_unblock_create
      description: Unblock a time slot (salon owners only)
      summary: Unblock time slot
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Time Slot.
        required: true
      tags:
      - Schedules - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimeSlot'
          description: ''
        '403':
          description: Forbidden
        '404':
          description: Time slot not found
  /api/v1/schedules/time-slots/dynamic_availability/:
    post:
      operationId: v1_schedules_time_slots_dynamic_availability_create
      description: "\n        Calculate available time slots dynamically based on:\n\
        \        - Shop schedule (open/close times for the day)\n        - Service\
        \ duration\n        - Staff availability (booking conflicts)\n        \n \
        \       This endpoint computes slots on-the-fly without requiring pre-generated\
        \ TimeSlot records.\n        \n        **Key Features:**\n        - Handles\
        \ staff concurrency (if Staff A is busy, Staff B may still be available)\n\
        \        - Respects service duration (a 45-min service blocks appropriate\
        \ time ranges)\n        - Filters past slots with configurable buffer\n  \
        \      \n        **Example Use Cases:**\n        - Customer booking flow:\
        \ Get available slots for a specific service on a date\n        - Staff scheduling:\
        \ See which time slots have no available staff\n        "
      summary: Dynamic availability calculator
      tags:
      - Schedules - Public
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DynamicAvailabilityRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DynamicAvailabilityRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DynamicAvailabilityRequestRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DynamicAvailabilityResponse'
          description: ''
        '400':
          description: Bad Request - Invalid service_id or date
        '404':
          description: Service not found
  /api/v1/schedules/time-slots/generate/:
    post:
      operationId: v1_schedules_time_slots_generate_create
      description: "\n        Create a manual time slot for special requests only.\n\
        \        \n        Use this endpoint ONLY for:\n        - VIP bookings with\
        \ custom times\n        - Special event reservations\n        - Blocked times\
        \ for maintenance/breaks\n        \n        For regular bookings, use /dynamic_availability/\
        \ + /dynamic_book/ instead.\n        Manual slots are automatically considered\
        \ in dynamic availability calculations.\n        "
      summary: Create manual time slot (Special Requests)
      tags:
      - Schedules - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TimeSlotGenerateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TimeSlotGenerateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TimeSlotGenerateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimeSlotGenerateResponse'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Shop not found
    patch:
      operationId: v1_schedules_time_slots_generate_partial_update
      description: "\n        Create a manual time slot for special requests only.\n\
        \        \n        Use this endpoint ONLY for:\n        - VIP bookings with\
        \ custom times\n        - Special event reservations\n        - Blocked times\
        \ for maintenance/breaks\n        \n        For regular bookings, use /dynamic_availability/\
        \ + /dynamic_book/ instead.\n        Manual slots are automatically considered\
        \ in dynamic availability calculations.\n        "
      summary: Create manual time slot (Special Requests)
      tags:
      - Schedules - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedTimeSlotGenerateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedTimeSlotGenerateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedTimeSlotGenerateRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimeSlotGenerateResponse'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Shop not found
  /api/v1/scraper/:
    get:
      operationId: v1_scraper_list
      description: List all scrape jobs for the current user.
      summary: List scrape jobs
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - Scraper
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedScrapeJobListList'
          description: ''
  /api/v1/scraper/{id}/:
    get:
      operationId: v1_scraper_retrieve
      description: "Get details of a specific scrape job including extracted data.\n\
        \        \nReturns HTTP 202 (Accepted) while job is still processing (pending/scraping/parsing/creating).\n\
        Returns HTTP 200 (OK) when job is completed or failed.\nFrontend should poll\
        \ this endpoint and show loading until HTTP 200 is returned."
      summary: Get scrape job details
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Scrape Job.
        required: true
      tags:
      - Scraper
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScrapeJob'
              examples:
                CompletedJob:
                  value:
                    id: 1d65492d-0ec0-4916-b8f4-9718a89bb3d3
                    url: https://example-salon.com
                    platform: generic
                    status: completed
                    extracted_data:
                      shop:
                        name: Example Salon
                        city: Los Angeles
                        phone: '+12025551234'
                      services:
                      - name: Haircut
                        price: 45
                        duration_minutes: 60
                      schedule:
                      - day_of_week: monday
                        start_time: 09:00
                        end_time: '18:00'
                    error_message: ''
                    shop_id: null
                    shop_name: null
                    client_email: owner@salon.com
                    scraping_count: 3
                    scraping_limit: 5
                    scraping_remaining: 2
                    created_at: '2025-12-31T08:00:00Z'
                    updated_at: '2025-12-31T08:01:00Z'
                  summary: Completed Job
          description: ''
        '202':
          description: Job still processing - poll again
        '404':
          description: Scrape job not found
  /api/v1/scraper/{id}/cancel/:
    delete:
      operationId: v1_scraper_cancel_destroy
      description: Cancel and delete a pending or failed scrape job.
      summary: Cancel/delete scrape job
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Scrape Job.
        required: true
      tags:
      - Scraper
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
          description: ''
        '400':
          description: Cannot delete confirmed jobs
        '404':
          description: Scrape job not found
  /api/v1/scraper/{id}/confirm/:
    post:
      operationId: v1_scraper_confirm_create
      description: Confirm scrape job and create shop with extracted data. Optionally
        allows overriding extracted data.
      summary: Confirm and create shop
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Scrape Job.
        required: true
      tags:
      - Scraper
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScrapeConfirmRequest'
            examples:
              ConfirmWithExtractedData:
                value:
                  shop:
                    name: Example Salon
                    city: Los Angeles
                    phone: '+12025551234'
                summary: Confirm with extracted data
                description: Use extracted shop data as-is
              ConfirmWithEdits:
                value:
                  shop:
                    name: My Custom Salon Name
                    city: New York
                    phone: '+19005551234'
                  services:
                  - name: Premium Haircut
                    price: 55
                    duration_minutes: 45
                summary: Confirm with edits
                description: Modify extracted data before creating
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ScrapeConfirmRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ScrapeConfirmRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '202':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScrapeConfirmResponse'
          description: ''
        '400':
          description: Invalid status or missing data
        '404':
          description: Scrape job not found
        '409':
          description: Shop already created
  /api/v1/scraper/limits/:
    get:
      operationId: v1_scraper_limits_retrieve
      description: Get the current scraping usage and limits for the authenticated
        client.
      summary: Get scraping limits
      tags:
      - Scraper
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScrapingLimitsResponse'
          description: ''
        '400':
          description: Client not found
  /api/v1/scraper/submit/:
    post:
      operationId: v1_scraper_submit_create
      description: Submit a salon website URL to scrape. Creates a ScrapeJob and queues
        async scraping task.
      summary: Submit URL for scraping
      tags:
      - Scraper
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScrapeSubmitRequest'
            examples:
              SubmitURL:
                value:
                  url: https://example-salon.com
                summary: Submit URL
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ScrapeSubmitRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ScrapeSubmitRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScrapeSubmitResponse'
          description: ''
        '400':
          description: Invalid URL or client not found
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScrapingLimitError'
          description: ''
        '409':
          description: Scraping job already in progress for this URL
  /api/v1/services/:
    get:
      operationId: v1_services_list
      description: Get all services. Customers see only active services. Salon owners
        see only their services.
      summary: List services
      parameters:
      - in: query
        name: is_active
        schema:
          type: boolean
        description: Filter by active status
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - in: query
        name: search
        schema:
          type: string
        description: Search in name and description
      - in: query
        name: shop
        schema:
          type: string
          format: uuid
      - in: query
        name: shop_id
        schema:
          type: string
          format: uuid
        description: Filter by shop ID
      tags:
      - Services - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedServiceList'
          description: ''
    post:
      operationId: v1_services_create
      description: Create a new service (salon owners only). Requires shop_id in request
        data.
      summary: Create service
      tags:
      - Services - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServiceCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ServiceCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ServiceCreateUpdateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Service'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden - Only salon owners can create services
        '404':
          description: Shop not found
  /api/v1/services/{id}/:
    get:
      operationId: v1_services_retrieve
      description: Retrieve detailed information about a specific service
      summary: Get service details
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Service.
        required: true
      tags:
      - Services - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Service'
          description: ''
        '404':
          description: Service not found
    put:
      operationId: v1_services_update
      description: Update service details (salon owners only)
      summary: Update service
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Service.
        required: true
      tags:
      - Services - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServiceCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ServiceCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ServiceCreateUpdateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Service'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Service not found
    patch:
      operationId: v1_services_partial_update
      description: Partially update service details (salon owners only)
      summary: Partial update service
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Service.
        required: true
      tags:
      - Services - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedServiceCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedServiceCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedServiceCreateUpdateRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Service'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Service not found
    delete:
      operationId: v1_services_destroy
      description: "\n        Delete a service (salon owners only).\n        \n  \
        \      **Restrictions:**\n        - Cannot delete if there are pending or\
        \ confirmed bookings for this service\n        - Complete or cancel active\
        \ bookings first, then delete\n        "
      summary: Delete service
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Service.
        required: true
      tags:
      - Services - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceDeleteError'
          description: ''
        '403':
          description: Forbidden
        '404':
          description: Service not found
  /api/v1/services/{id}/toggle_active/:
    patch:
      operationId: v1_services_toggle_active_partial_update
      description: Enable or disable a service (salon owners only)
      summary: Toggle service active status
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Service.
        required: true
      tags:
      - Services - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Service'
          description: ''
        '403':
          description: Forbidden
        '404':
          description: Service not found
  /api/v1/services/deals/:
    get:
      operationId: v1_services_deals_list
      description: Get all deals/packages. Customers see only active deals. Salon
        owners see only their deals.
      summary: List deals
      parameters:
      - in: query
        name: is_active
        schema:
          type: boolean
        description: Filter by active status
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - in: query
        name: search
        schema:
          type: string
        description: Search in name and description
      - in: query
        name: shop
        schema:
          type: string
          format: uuid
      - in: query
        name: shop_id
        schema:
          type: string
          format: uuid
        description: Filter by shop ID
      tags:
      - Deals - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedDealList'
          description: ''
    post:
      operationId: v1_services_deals_create
      description: Create a new deal/package (salon owners only). Requires shop_id
        in request data.
      summary: Create deal
      tags:
      - Deals - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DealCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DealCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DealCreateUpdateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deal'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden - Only salon owners can create deals
        '404':
          description: Shop not found
  /api/v1/services/deals/{id}/:
    get:
      operationId: v1_services_deals_retrieve
      description: Retrieve detailed information about a specific deal/package
      summary: Get deal details
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Deal.
        required: true
      tags:
      - Deals - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deal'
          description: ''
        '404':
          description: Deal not found
    put:
      operationId: v1_services_deals_update
      description: Update deal details (salon owners only)
      summary: Update deal
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Deal.
        required: true
      tags:
      - Deals - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DealCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DealCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DealCreateUpdateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deal'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Deal not found
    patch:
      operationId: v1_services_deals_partial_update
      description: Partially update deal details (salon owners only)
      summary: Partial update deal
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Deal.
        required: true
      tags:
      - Deals - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedDealCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedDealCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedDealCreateUpdateRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deal'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Deal not found
    delete:
      operationId: v1_services_deals_destroy
      description: Delete a deal/package (salon owners only)
      summary: Delete deal
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Deal.
        required: true
      tags:
      - Deals - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
          description: ''
        '403':
          description: Forbidden
        '404':
          description: Deal not found
  /api/v1/services/deals/{id}/toggle_active/:
    patch:
      operationId: v1_services_deals_toggle_active_partial_update
      description: Enable or disable a deal (salon owners only)
      summary: Toggle deal active status
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Deal.
        required: true
      tags:
      - Deals - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deal'
          description: ''
        '403':
          description: Forbidden
        '404':
          description: Deal not found
  /api/v1/shops/:
    get:
      operationId: v1_shops_list
      description: Get all shops. Salon owners see their shops, customers see active
        shops.
      summary: List shops
      parameters:
      - in: query
        name: city
        schema:
          type: string
        description: Filter by city
      - in: query
        name: is_active
        schema:
          type: boolean
        description: Filter by active status
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - in: query
        name: search
        schema:
          type: string
        description: Search in name, description, city, address
      - in: query
        name: state
        schema:
          type: string
        description: Filter by state
      tags:
      - Shops - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedShopList'
          description: ''
    post:
      operationId: v1_shops_create
      description: "\n        Create a new shop (salon owners only).\n        \n \
        \       You can optionally include a cover image during creation by sending\
        \ multipart/form-data\n        with the 'cover_image' field.\n        "
      summary: Create shop
      tags:
      - Shops - Client
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                address:
                  type: string
                city:
                  type: string
                state:
                  type: string
                postal_code:
                  type: string
                country:
                  type: string
                phone:
                  type: string
                email:
                  type: string
                website:
                  type: string
                timezone:
                  type: string
                is_active:
                  type: boolean
                cover_image:
                  type: string
                  format: binary
                  description: Optional cover image (JPEG, PNG, or WebP, max 5MB)
              required:
              - name
              - address
              - city
              - postal_code
              - phone
              - timezone
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Shop'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden - Only salon owners can create shops
  /api/v1/shops/{id}/:
    get:
      operationId: v1_shops_retrieve
      description: Retrieve detailed information about a specific shop including services
      summary: Get shop details
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Shop.
        required: true
      tags:
      - Shops - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShopDetail'
              examples:
                ShopResponseExample:
                  value:
                    id: e188f3d1-921d-4261-9ea5-d6cfad62962a
                    client: 5f8d7f6e-4d3c-2b1a-0e9f-8g7h6i5j4k3l
                    client_name: Sidra's Business
                    name: Sidra's Beauty Salon
                    description: Premium beauty services
                    address: 123 Main Street
                    city: Karachi
                    state: Sindh
                    postal_code: '75500'
                    country: Pakistan
                    phone: +92-300-1234567
                    email: info@sidrasbeauty.com
                    website: https://sidrasbeauty.com
                    logo_url: ''
                    cover_image_url: ''
                    timezone: Asia/Karachi
                    is_active: true
                    services_count: 5
                    created_at: '2025-12-01T10:00:00Z'
                    updated_at: '2025-12-08T08:00:00Z'
                  summary: Shop Response Example
          description: ''
        '404':
          description: Shop not found
    put:
      operationId: v1_shops_update
      description: Update shop details (salon owners only)
      summary: Update shop
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Shop.
        required: true
      tags:
      - Shops - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ShopCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ShopCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ShopCreateUpdateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Shop'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Shop not found
    patch:
      operationId: v1_shops_partial_update
      description: Partially update shop details (salon owners only)
      summary: Partial update shop
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Shop.
        required: true
      tags:
      - Shops - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedShopCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedShopCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedShopCreateUpdateRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Shop'
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Shop not found
    delete:
      operationId: v1_shops_destroy
      description: "\n        Delete a shop and ALL associated data (salon owners\
        \ only).\n        \n        **This is a permanent action that:**\n       \
        \ - Deletes ALL staff members from the shop\n        - Deletes staff user\
        \ accounts from Clerk (they won't be able to log in anymore)\n        - Deletes\
        \ all services and deals from Pinecone\n        - Deletes the shop from Pinecone\n\
        \        - Deletes the shop and all related data from the database\n     \
        \   \n        **Note:** Bookings are preserved for records but will show the\
        \ shop/staff as deleted.\n        "
      summary: Delete shop
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Shop.
        required: true
      tags:
      - Shops - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  deleted_shop:
                    type: string
                  deleted_staff_count:
                    type: integer
                  deleted_clerk_users:
                    type: integer
                  deleted_services_count:
                    type: integer
                  deleted_deals_count:
                    type: integer
          description: Shop deleted successfully
        '403':
          description: Forbidden
        '404':
          description: Shop not found
  /api/v1/shops/{id}/dashboard/:
    get:
      operationId: v1_shops_dashboard_retrieve
      description: Get shop statistics and dashboard data (salon owners only)
      summary: Shop dashboard
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Shop.
        required: true
      tags:
      - Shops - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/v1/shops/{id}/public/:
    get:
      operationId: v1_shops_public_retrieve
      description: Get public shop information (no authentication required)
      summary: Public shop details
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Shop.
        required: true
      tags:
      - Shops - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShopDetail'
          description: ''
        '404':
          description: Shop not found
  /api/v1/shops/{id}/toggle_active/:
    patch:
      operationId: v1_shops_toggle_active_partial_update
      description: Activate or deactivate a shop (salon owners only)
      summary: Toggle shop active status
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Shop.
        required: true
      tags:
      - Shops - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Shop'
          description: ''
        '403':
          description: Forbidden
        '404':
          description: Shop not found
  /api/v1/shops/my_shops/:
    get:
      operationId: v1_shops_my_shops_list
      description: Get all shops owned by the current salon owner
      summary: My shops
      parameters:
      - in: query
        name: city
        schema:
          type: string
      - in: query
        name: is_active
        schema:
          type: boolean
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      - in: query
        name: state
        schema:
          type: string
      tags:
      - Shops - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedShopList'
          description: ''
  /api/v1/shops/search/:
    get:
      operationId: v1_shops_search_list
      description: Search for shops with advanced filters (public endpoint)
      summary: Search shops
      parameters:
      - in: query
        name: city
        schema:
          type: string
        description: Filter by city
      - in: query
        name: is_active
        schema:
          type: boolean
      - in: query
        name: max_price
        schema:
          type: number
          format: double
        description: Maximum service price
      - in: query
        name: min_price
        schema:
          type: number
          format: double
        description: Minimum service price
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - in: query
        name: query
        schema:
          type: string
        description: Search query
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      - in: query
        name: service
        schema:
          type: string
        description: Filter by service name
      - in: query
        name: state
        schema:
          type: string
      tags:
      - Shops - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedShopList'
          description: ''
  /api/v1/shops/timezone_choices/:
    get:
      operationId: v1_shops_timezone_choices_retrieve
      description: Get list of all available IANA timezones for dropdown selection
        (public endpoint)
      summary: Get timezone choices
      tags:
      - Shops - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/v1/staff/:
    get:
      operationId: v1_staff_list
      description: Get all staff members. Filter by shop_id to get staff for a specific
        shop. Public endpoint.
      summary: List staff members
      parameters:
      - in: query
        name: is_active
        schema:
          type: boolean
        description: Filter by active status
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - in: query
        name: search
        schema:
          type: string
        description: Search in name, email, phone
      - in: query
        name: shop
        schema:
          type: string
          format: uuid
      - in: query
        name: shop_id
        schema:
          type: string
          format: uuid
        description: Filter by shop ID
      tags:
      - Staff - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedStaffMemberList'
              examples:
                StaffMemberResponse:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: 550e8400-e29b-41d4-a716-446655440000
                      shop: 660e8400-e29b-41d4-a716-446655440001
                      shop_name: Glamour Salon
                      name: Jane Smith
                      email: jane@example.com
                      phone: '+1234567890'
                      bio: Senior stylist with 10 years experience
                      profile_image_url: https://example.com/images/jane.jpg
                      is_active: true
                      invite_status: accepted
                      invite_sent_at: '2024-12-01T10:00:00Z'
                      invite_accepted_at: '2024-12-01T12:30:00Z'
                      assigned_services:
                      - id: 770e8400-e29b-41d4-a716-446655440002
                        service_id: 880e8400-e29b-41d4-a716-446655440003
                        service_name: Haircut
                        service_price: '50.00'
                        is_primary: true
                      total_bookings: 42
                      created_at: '2024-12-01T10:00:00Z'
                      updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Response
          description: ''
    post:
      operationId: v1_staff_create
      description: Add a new staff member to a shop and send invitation email (salon
        owners only). Requires shop_id and email in request body.
      summary: Create staff member
      tags:
      - Staff - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StaffMemberCreateUpdateRequest'
            examples:
              CreateStaffMember:
                value:
                  shop_id: 660e8400-e29b-41d4-a716-446655440001
                  name: Jane Smith
                  email: jane@example.com
                  phone: '+1234567890'
                  bio: Senior stylist with 10 years experience
                  profile_image_url: https://example.com/images/jane.jpg
                  is_active: true
                  send_invite: true
                summary: Create Staff Member
                description: Create a new staff member and send Clerk invitation email
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StaffMemberCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StaffMemberCreateUpdateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffMember'
              examples:
                StaffMemberResponse:
                  value:
                    id: 550e8400-e29b-41d4-a716-446655440000
                    shop: 660e8400-e29b-41d4-a716-446655440001
                    shop_name: Glamour Salon
                    name: Jane Smith
                    email: jane@example.com
                    phone: '+1234567890'
                    bio: Senior stylist with 10 years experience
                    profile_image_url: https://example.com/images/jane.jpg
                    is_active: true
                    invite_status: accepted
                    invite_sent_at: '2024-12-01T10:00:00Z'
                    invite_accepted_at: '2024-12-01T12:30:00Z'
                    assigned_services:
                    - id: 770e8400-e29b-41d4-a716-446655440002
                      service_id: 880e8400-e29b-41d4-a716-446655440003
                      service_name: Haircut
                      service_price: '50.00'
                      is_primary: true
                    total_bookings: 42
                    created_at: '2024-12-01T10:00:00Z'
                    updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Response
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden - Only salon owners can create staff
  /api/v1/staff/{id}/:
    get:
      operationId: v1_staff_retrieve
      description: Retrieve detailed information about a specific staff member including
        assigned services. Public endpoint.
      summary: Get staff member details
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Staff Member.
        required: true
      tags:
      - Staff - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffMemberDetail'
              examples:
                StaffMemberDetailResponse:
                  value:
                    id: 550e8400-e29b-41d4-a716-446655440000
                    shop_id: 660e8400-e29b-41d4-a716-446655440001
                    shop_name: Glamour Salon
                    name: Jane Smith
                    email: jane@example.com
                    phone: '+1234567890'
                    bio: Senior stylist with 10 years experience
                    profile_image_url: https://example.com/images/jane.jpg
                    is_active: true
                    invite_status: accepted
                    invite_sent_at: '2024-12-01T10:00:00Z'
                    invite_accepted_at: '2024-12-01T12:30:00Z'
                    has_account: true
                    assigned_services:
                    - id: 770e8400-e29b-41d4-a716-446655440002
                      service_id: 880e8400-e29b-41d4-a716-446655440003
                      service_name: Haircut
                      service_price: '50.00'
                      is_primary: true
                    total_bookings: 42
                    recent_bookings_count: 8
                    created_at: '2024-12-01T10:00:00Z'
                    updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Detail Response
          description: ''
        '404':
          description: Staff member not found
    put:
      operationId: v1_staff_update
      description: Update staff member details (salon owners only)
      summary: Update staff member
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Staff Member.
        required: true
      tags:
      - Staff - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StaffMemberCreateUpdateRequest'
            examples:
              CreateStaffMember:
                value:
                  shop_id: 660e8400-e29b-41d4-a716-446655440001
                  name: Jane Smith
                  email: jane@example.com
                  phone: '+1234567890'
                  bio: Senior stylist with 10 years experience
                  profile_image_url: https://example.com/images/jane.jpg
                  is_active: true
                  send_invite: true
                summary: Create Staff Member
                description: Create a new staff member and send Clerk invitation email
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StaffMemberCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StaffMemberCreateUpdateRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffMember'
              examples:
                StaffMemberResponse:
                  value:
                    id: 550e8400-e29b-41d4-a716-446655440000
                    shop: 660e8400-e29b-41d4-a716-446655440001
                    shop_name: Glamour Salon
                    name: Jane Smith
                    email: jane@example.com
                    phone: '+1234567890'
                    bio: Senior stylist with 10 years experience
                    profile_image_url: https://example.com/images/jane.jpg
                    is_active: true
                    invite_status: accepted
                    invite_sent_at: '2024-12-01T10:00:00Z'
                    invite_accepted_at: '2024-12-01T12:30:00Z'
                    assigned_services:
                    - id: 770e8400-e29b-41d4-a716-446655440002
                      service_id: 880e8400-e29b-41d4-a716-446655440003
                      service_name: Haircut
                      service_price: '50.00'
                      is_primary: true
                    total_bookings: 42
                    created_at: '2024-12-01T10:00:00Z'
                    updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Response
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Staff member not found
    patch:
      operationId: v1_staff_partial_update
      description: Partially update staff member details (salon owners only)
      summary: Partial update staff member
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Staff Member.
        required: true
      tags:
      - Staff - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedStaffMemberCreateUpdateRequest'
            examples:
              CreateStaffMember:
                value:
                  shop_id: 660e8400-e29b-41d4-a716-446655440001
                  name: Jane Smith
                  email: jane@example.com
                  phone: '+1234567890'
                  bio: Senior stylist with 10 years experience
                  profile_image_url: https://example.com/images/jane.jpg
                  is_active: true
                  send_invite: true
                summary: Create Staff Member
                description: Create a new staff member and send Clerk invitation email
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedStaffMemberCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedStaffMemberCreateUpdateRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffMember'
              examples:
                StaffMemberResponse:
                  value:
                    id: 550e8400-e29b-41d4-a716-446655440000
                    shop: 660e8400-e29b-41d4-a716-446655440001
                    shop_name: Glamour Salon
                    name: Jane Smith
                    email: jane@example.com
                    phone: '+1234567890'
                    bio: Senior stylist with 10 years experience
                    profile_image_url: https://example.com/images/jane.jpg
                    is_active: true
                    invite_status: accepted
                    invite_sent_at: '2024-12-01T10:00:00Z'
                    invite_accepted_at: '2024-12-01T12:30:00Z'
                    assigned_services:
                    - id: 770e8400-e29b-41d4-a716-446655440002
                      service_id: 880e8400-e29b-41d4-a716-446655440003
                      service_name: Haircut
                      service_price: '50.00'
                      is_primary: true
                    total_bookings: 42
                    created_at: '2024-12-01T10:00:00Z'
                    updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Response
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Staff member not found
    delete:
      operationId: v1_staff_destroy
      description: "\n        Remove a staff member from a shop (salon owners only).\n\
        \        \n        **This is a permanent action that:**\n        - Deletes\
        \ the staff member profile from the shop\n        - Deletes the associated\
        \ user account from the database\n        - Deletes the user from Clerk (they\
        \ won't be able to log in anymore)\n        \n        **Restrictions:**\n\
        \        - Cannot delete if staff has pending or confirmed bookings\n    \
        \    - Reassign all active bookings to other staff first using `/bookings/{id}/reassign_staff/`\n\
        \        - Then the staff member can be deleted\n        "
      summary: Delete staff member
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Staff Member.
        required: true
      tags:
      - Staff - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  deleted_staff:
                    type: string
                  deleted_user:
                    type: boolean
                  deleted_clerk_user:
                    type: boolean
          description: Staff deleted successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffDeleteError'
          description: ''
        '403':
          description: Forbidden
        '404':
          description: Staff member not found
  /api/v1/staff/{id}/assign_services/:
    post:
      operationId: v1_staff_assign_services_create
      description: Assign one or more services to a staff member. Can mark staff as
        primary for specific services (salon owners only).
      summary: Assign services to staff
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Staff Member.
        required: true
      tags:
      - Staff - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StaffServiceAssignmentRequest'
            examples:
              AssignServices:
                value:
                  service_ids:
                  - 880e8400-e29b-41d4-a716-446655440003
                  - 990e8400-e29b-41d4-a716-446655440004
                  is_primary: true
                summary: Assign Services
                description: Assign multiple services to a staff member
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StaffServiceAssignmentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StaffServiceAssignmentRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffMemberDetail'
              examples:
                StaffMemberDetailResponse:
                  value:
                    id: 550e8400-e29b-41d4-a716-446655440000
                    shop_id: 660e8400-e29b-41d4-a716-446655440001
                    shop_name: Glamour Salon
                    name: Jane Smith
                    email: jane@example.com
                    phone: '+1234567890'
                    bio: Senior stylist with 10 years experience
                    profile_image_url: https://example.com/images/jane.jpg
                    is_active: true
                    invite_status: accepted
                    invite_sent_at: '2024-12-01T10:00:00Z'
                    invite_accepted_at: '2024-12-01T12:30:00Z'
                    has_account: true
                    assigned_services:
                    - id: 770e8400-e29b-41d4-a716-446655440002
                      service_id: 880e8400-e29b-41d4-a716-446655440003
                      service_name: Haircut
                      service_price: '50.00'
                      is_primary: true
                    total_bookings: 42
                    recent_bookings_count: 8
                    created_at: '2024-12-01T10:00:00Z'
                    updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Detail Response
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Staff member or service not found
  /api/v1/staff/{id}/remove_service/:
    delete:
      operationId: v1_staff_remove_service_destroy
      description: Remove a service assignment from a staff member (salon owners only)
      summary: Remove service from staff
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Staff Member.
        required: true
      - in: query
        name: service_id
        schema:
          type: string
          format: uuid
        description: Service ID to remove
        required: true
      tags:
      - Staff - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffMemberDetail'
              examples:
                StaffMemberDetailResponse:
                  value:
                    id: 550e8400-e29b-41d4-a716-446655440000
                    shop_id: 660e8400-e29b-41d4-a716-446655440001
                    shop_name: Glamour Salon
                    name: Jane Smith
                    email: jane@example.com
                    phone: '+1234567890'
                    bio: Senior stylist with 10 years experience
                    profile_image_url: https://example.com/images/jane.jpg
                    is_active: true
                    invite_status: accepted
                    invite_sent_at: '2024-12-01T10:00:00Z'
                    invite_accepted_at: '2024-12-01T12:30:00Z'
                    has_account: true
                    assigned_services:
                    - id: 770e8400-e29b-41d4-a716-446655440002
                      service_id: 880e8400-e29b-41d4-a716-446655440003
                      service_name: Haircut
                      service_price: '50.00'
                      is_primary: true
                    total_bookings: 42
                    recent_bookings_count: 8
                    created_at: '2024-12-01T10:00:00Z'
                    updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Detail Response
          description: ''
        '400':
          description: Bad Request
        '403':
          description: Forbidden
        '404':
          description: Staff member or service not found
  /api/v1/staff/{id}/resend_invite/:
    post:
      operationId: v1_staff_resend_invite_create
      description: Resend invitation email to a staff member who hasn't accepted yet
        (salon owners only)
      summary: Resend invitation
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Staff Member.
        required: true
      tags:
      - Staff - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StaffMemberRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StaffMemberRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StaffMemberRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffMember'
              examples:
                StaffMemberResponse:
                  value:
                    id: 550e8400-e29b-41d4-a716-446655440000
                    shop: 660e8400-e29b-41d4-a716-446655440001
                    shop_name: Glamour Salon
                    name: Jane Smith
                    email: jane@example.com
                    phone: '+1234567890'
                    bio: Senior stylist with 10 years experience
                    profile_image_url: https://example.com/images/jane.jpg
                    is_active: true
                    invite_status: accepted
                    invite_sent_at: '2024-12-01T10:00:00Z'
                    invite_accepted_at: '2024-12-01T12:30:00Z'
                    assigned_services:
                    - id: 770e8400-e29b-41d4-a716-446655440002
                      service_id: 880e8400-e29b-41d4-a716-446655440003
                      service_name: Haircut
                      service_price: '50.00'
                      is_primary: true
                    total_bookings: 42
                    created_at: '2024-12-01T10:00:00Z'
                    updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Response
          description: ''
        '400':
          description: Bad Request - Staff already has an account
        '403':
          description: Forbidden
        '404':
          description: Staff member not found
  /api/v1/staff/{id}/toggle_availability/:
    patch:
      operationId: v1_staff_toggle_availability_partial_update
      description: Mark staff as available or unavailable (e.g., for sick days, days
        off). Salon owners only.
      summary: Toggle staff availability
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Staff Member.
        required: true
      tags:
      - Staff - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffMember'
              examples:
                StaffMemberResponse:
                  value:
                    id: 550e8400-e29b-41d4-a716-446655440000
                    shop: 660e8400-e29b-41d4-a716-446655440001
                    shop_name: Glamour Salon
                    name: Jane Smith
                    email: jane@example.com
                    phone: '+1234567890'
                    bio: Senior stylist with 10 years experience
                    profile_image_url: https://example.com/images/jane.jpg
                    is_active: true
                    invite_status: accepted
                    invite_sent_at: '2024-12-01T10:00:00Z'
                    invite_accepted_at: '2024-12-01T12:30:00Z'
                    assigned_services:
                    - id: 770e8400-e29b-41d4-a716-446655440002
                      service_id: 880e8400-e29b-41d4-a716-446655440003
                      service_name: Haircut
                      service_price: '50.00'
                      is_primary: true
                    total_bookings: 42
                    created_at: '2024-12-01T10:00:00Z'
                    updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Response
          description: ''
        '403':
          description: Forbidden
        '404':
          description: Staff member not found
  /api/v1/staff/available_for_service/:
    get:
      operationId: v1_staff_available_for_service_list
      description: Get all staff members who can provide a specific service. Public
        endpoint for customer booking.
      summary: Get available staff for service
      parameters:
      - in: query
        name: is_active
        schema:
          type: boolean
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      - in: query
        name: service_id
        schema:
          type: string
          format: uuid
        description: Service ID
        required: true
      - in: query
        name: shop
        schema:
          type: string
          format: uuid
      - in: query
        name: shop_id
        schema:
          type: string
          format: uuid
        description: Shop ID
        required: true
      tags:
      - Staff - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedStaffMemberList'
              examples:
                StaffMemberResponse:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: 550e8400-e29b-41d4-a716-446655440000
                      shop: 660e8400-e29b-41d4-a716-446655440001
                      shop_name: Glamour Salon
                      name: Jane Smith
                      email: jane@example.com
                      phone: '+1234567890'
                      bio: Senior stylist with 10 years experience
                      profile_image_url: https://example.com/images/jane.jpg
                      is_active: true
                      invite_status: accepted
                      invite_sent_at: '2024-12-01T10:00:00Z'
                      invite_accepted_at: '2024-12-01T12:30:00Z'
                      assigned_services:
                      - id: 770e8400-e29b-41d4-a716-446655440002
                        service_id: 880e8400-e29b-41d4-a716-446655440003
                        service_name: Haircut
                        service_price: '50.00'
                        is_primary: true
                      total_bookings: 42
                      created_at: '2024-12-01T10:00:00Z'
                      updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Response
          description: ''
  /api/v1/staff/available_for_time_slot/:
    get:
      operationId: v1_staff_available_for_time_slot_list
      description: Get all staff members available for a specific time slot (not already
        booked). Optionally filter by service. Public endpoint for customer booking.
      summary: Get available staff for time slot
      parameters:
      - in: query
        name: is_active
        schema:
          type: boolean
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      - in: query
        name: service_id
        schema:
          type: string
          format: uuid
        description: 'Optional: Filter by service ID'
      - in: query
        name: shop
        schema:
          type: string
          format: uuid
      - in: query
        name: time_slot_id
        schema:
          type: string
          format: uuid
        description: Time Slot ID
        required: true
      tags:
      - Staff - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedStaffMemberList'
              examples:
                StaffMemberResponse:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: 550e8400-e29b-41d4-a716-446655440000
                      shop: 660e8400-e29b-41d4-a716-446655440001
                      shop_name: Glamour Salon
                      name: Jane Smith
                      email: jane@example.com
                      phone: '+1234567890'
                      bio: Senior stylist with 10 years experience
                      profile_image_url: https://example.com/images/jane.jpg
                      is_active: true
                      invite_status: accepted
                      invite_sent_at: '2024-12-01T10:00:00Z'
                      invite_accepted_at: '2024-12-01T12:30:00Z'
                      assigned_services:
                      - id: 770e8400-e29b-41d4-a716-446655440002
                        service_id: 880e8400-e29b-41d4-a716-446655440003
                        service_name: Haircut
                        service_price: '50.00'
                        is_primary: true
                      total_bookings: 42
                      created_at: '2024-12-01T10:00:00Z'
                      updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Response
          description: ''
  /api/v1/staff/dashboard/me/:
    get:
      operationId: v1_staff_dashboard_me_retrieve
      description: Get the current staff member's profile including shop info and
        assigned services
      summary: Get my profile
      tags:
      - Staff Dashboard
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffMemberDetail'
              examples:
                StaffMemberDetailResponse:
                  value:
                    id: 550e8400-e29b-41d4-a716-446655440000
                    shop_id: 660e8400-e29b-41d4-a716-446655440001
                    shop_name: Glamour Salon
                    name: Jane Smith
                    email: jane@example.com
                    phone: '+1234567890'
                    bio: Senior stylist with 10 years experience
                    profile_image_url: https://example.com/images/jane.jpg
                    is_active: true
                    invite_status: accepted
                    invite_sent_at: '2024-12-01T10:00:00Z'
                    invite_accepted_at: '2024-12-01T12:30:00Z'
                    has_account: true
                    assigned_services:
                    - id: 770e8400-e29b-41d4-a716-446655440002
                      service_id: 880e8400-e29b-41d4-a716-446655440003
                      service_name: Haircut
                      service_price: '50.00'
                      is_primary: true
                    total_bookings: 42
                    recent_bookings_count: 8
                    created_at: '2024-12-01T10:00:00Z'
                    updated_at: '2024-12-09T15:00:00Z'
                  summary: Staff Member Detail Response
          description: ''
        '404':
          description: Staff profile not found
  /api/v1/staff/dashboard/my-bookings/:
    get:
      operationId: v1_staff_dashboard_my_bookings_list
      description: Get all bookings assigned to the current staff member. Optionally
        filter by status.
      summary: Get my bookings
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - Staff Dashboard
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBookingListList'
              examples:
                PendingBooking(Payable):
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                      customer_name: John Doe
                      shop_name: Elegant Salon
                      service_name: Haircut & Style
                      deal_name: null
                      item_name: Haircut & Style
                      is_deal_booking: false
                      staff_member_name: Sarah Johnson
                      booking_datetime: '2026-01-15T14:00:00Z'
                      duration_minutes: 45
                      status: pending
                      payment_status: pending
                      can_pay: true
                      client_secret: pi_3Abc123XYz_secret_def456
                      payment_expires_at: '2026-01-14T12:45:00Z'
                      time_remaining_seconds: 845
                      payment_amount: 5.0
                      total_price: '50.00'
                      created_at: '2026-01-14T12:30:00Z'
                  summary: Pending Booking (Payable)
                ConfirmedBooking:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: b2c3d4e5-f6a7-8901-bcde-f12345678901
                      customer_name: Jane Smith
                      shop_name: Elegant Salon
                      service_name: null
                      deal_name: Spa Package
                      item_name: Spa Package
                      is_deal_booking: true
                      staff_member_name: null
                      booking_datetime: '2026-01-16T10:00:00Z'
                      duration_minutes: 90
                      status: confirmed
                      payment_status: paid
                      can_pay: false
                      client_secret: null
                      payment_expires_at: null
                      time_remaining_seconds: null
                      payment_amount: null
                      total_price: '120.00'
                      created_at: '2026-01-13T09:00:00Z'
                  summary: Confirmed Booking
          description: ''
  /api/v1/staff/dashboard/my-services/:
    get:
      operationId: v1_staff_dashboard_my_services_list
      description: Get all services assigned to the current staff member
      summary: Get my services
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - Staff Dashboard
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedServiceList'
          description: ''
  /api/v1/staff/dashboard/today-bookings/:
    get:
      operationId: v1_staff_dashboard_today_bookings_list
      description: Get all bookings for today assigned to the current staff member
      summary: Get today's bookings
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - Staff Dashboard
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBookingListList'
              examples:
                PendingBooking(Payable):
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                      customer_name: John Doe
                      shop_name: Elegant Salon
                      service_name: Haircut & Style
                      deal_name: null
                      item_name: Haircut & Style
                      is_deal_booking: false
                      staff_member_name: Sarah Johnson
                      booking_datetime: '2026-01-15T14:00:00Z'
                      duration_minutes: 45
                      status: pending
                      payment_status: pending
                      can_pay: true
                      client_secret: pi_3Abc123XYz_secret_def456
                      payment_expires_at: '2026-01-14T12:45:00Z'
                      time_remaining_seconds: 845
                      payment_amount: 5.0
                      total_price: '50.00'
                      created_at: '2026-01-14T12:30:00Z'
                  summary: Pending Booking (Payable)
                ConfirmedBooking:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: b2c3d4e5-f6a7-8901-bcde-f12345678901
                      customer_name: Jane Smith
                      shop_name: Elegant Salon
                      service_name: null
                      deal_name: Spa Package
                      item_name: Spa Package
                      is_deal_booking: true
                      staff_member_name: null
                      booking_datetime: '2026-01-16T10:00:00Z'
                      duration_minutes: 90
                      status: confirmed
                      payment_status: paid
                      can_pay: false
                      client_secret: null
                      payment_expires_at: null
                      time_remaining_seconds: null
                      payment_amount: null
                      total_price: '120.00'
                      created_at: '2026-01-13T09:00:00Z'
                  summary: Confirmed Booking
          description: ''
  /api/v1/staff/dashboard/upcoming-bookings/:
    get:
      operationId: v1_staff_dashboard_upcoming_bookings_list
      description: Get upcoming confirmed/pending bookings for the current staff member
      summary: Get upcoming bookings
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - Staff Dashboard
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBookingListList'
              examples:
                PendingBooking(Payable):
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                      customer_name: John Doe
                      shop_name: Elegant Salon
                      service_name: Haircut & Style
                      deal_name: null
                      item_name: Haircut & Style
                      is_deal_booking: false
                      staff_member_name: Sarah Johnson
                      booking_datetime: '2026-01-15T14:00:00Z'
                      duration_minutes: 45
                      status: pending
                      payment_status: pending
                      can_pay: true
                      client_secret: pi_3Abc123XYz_secret_def456
                      payment_expires_at: '2026-01-14T12:45:00Z'
                      time_remaining_seconds: 845
                      payment_amount: 5.0
                      total_price: '50.00'
                      created_at: '2026-01-14T12:30:00Z'
                  summary: Pending Booking (Payable)
                ConfirmedBooking:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - id: b2c3d4e5-f6a7-8901-bcde-f12345678901
                      customer_name: Jane Smith
                      shop_name: Elegant Salon
                      service_name: null
                      deal_name: Spa Package
                      item_name: Spa Package
                      is_deal_booking: true
                      staff_member_name: null
                      booking_datetime: '2026-01-16T10:00:00Z'
                      duration_minutes: 90
                      status: confirmed
                      payment_status: paid
                      can_pay: false
                      client_secret: null
                      payment_expires_at: null
                      time_remaining_seconds: null
                      payment_amount: null
                      total_price: '120.00'
                      created_at: '2026-01-13T09:00:00Z'
                  summary: Confirmed Booking
          description: ''
  /api/v1/staff/resend_verification_link/:
    post:
      operationId: v1_staff_resend_verification_link_create
      description: "\n        Resend Clerk verification/invitation link to a staff\
        \ member.\n        \n        Use this endpoint when:\n        - The first\
        \ invitation email wasn't received\n        - The invitation link has expired\n\
        \        - Staff member needs a new link for any reason\n        \n      \
        \  Requires staff_id and email for verification.\n        "
      summary: Resend verification link
      tags:
      - Staff - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResendVerificationLinkRequest'
            examples:
              ResendVerificationLink:
                value:
                  staff_id: 550e8400-e29b-41d4-a716-446655440000
                  email: jane.smith@example.com
                summary: Resend Verification Link
                description: Resend verification/invitation link to a staff member
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ResendVerificationLinkRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ResendVerificationLinkRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Verification link sent successfully to jane@example.com
                  staff_member:
                    type: object
          description: Verification link sent successfully
        '400':
          description: Bad Request - Invalid data or staff already has account
        '403':
          description: Forbidden - Not shop owner
        '404':
          description: Staff member not found or email mismatch
  /api/v1/staff/sync_with_clerk/:
    post:
      operationId: v1_staff_sync_with_clerk_create
      description: "\n        Synchronize staff member status with Clerk users.\n\
        \        \n        This endpoint checks Clerk for users with matching emails\
        \ and updates\n        the invite_status and invite_accepted_at for staff\
        \ members who have \n        completed signup but weren't properly tracked.\n\
        \        \n        Use this to fix staff members who show as 'sent' but have\
        \ actually\n        accepted their invitation.\n        "
      summary: Sync staff with Clerk
      tags:
      - Staff - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StaffMemberRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StaffMemberRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StaffMemberRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  synced_count:
                    type: integer
                  synced_staff:
                    type: array
          description: Sync completed
        '403':
          description: Forbidden
  /api/v1/subscriptions/cancel/:
    post:
      operationId: v1_subscriptions_cancel_create
      description: Cancel subscription (at period end or immediately)
      summary: Cancel subscription
      tags:
      - Subscriptions - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionCancelRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SubscriptionCancelRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SubscriptionCancelRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          description: Subscription cancelled
        '400':
          description: Bad Request
        '404':
          description: No active subscription
  /api/v1/subscriptions/checkout/:
    post:
      operationId: v1_subscriptions_checkout_create
      description: Create Stripe checkout session for subscription purchase. Validates
        upgrade/downgrade rules.
      summary: Create checkout session
      tags:
      - Subscriptions - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckoutSessionRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CheckoutSessionRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CheckoutSessionRequestRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckoutSessionResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckoutError'
          description: ''
        '403':
          description: Forbidden - Clients only
  /api/v1/subscriptions/current/:
    get:
      operationId: v1_subscriptions_current_retrieve
      description: Get details of user's current active subscription
      summary: Get current subscription
      tags:
      - Subscriptions - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CurrentSubscription'
          description: ''
        '404':
          description: No active subscription
  /api/v1/subscriptions/history/:
    get:
      operationId: v1_subscriptions_history_list
      description: Get history of all subscription changes
      summary: Get subscription history
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - Subscriptions - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedSubscriptionHistoryList'
          description: ''
  /api/v1/subscriptions/payments/:
    get:
      operationId: v1_subscriptions_payments_list
      description: Get payment history for user's subscriptions
      summary: List payments
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - Subscriptions - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedPaymentList'
          description: ''
  /api/v1/subscriptions/payments/{id}/:
    get:
      operationId: v1_subscriptions_payments_retrieve
      description: Get details of a specific payment
      summary: Get payment details
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Payment.
        required: true
      tags:
      - Subscriptions - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
          description: ''
        '404':
          description: Payment not found
  /api/v1/subscriptions/plans/:
    get:
      operationId: v1_subscriptions_plans_list
      description: Get all available subscription plans (only active plans for non-admin)
      summary: List subscription plans
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - Subscriptions - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedSubscriptionPlanList'
          description: ''
  /api/v1/subscriptions/plans/{id}/:
    get:
      operationId: v1_subscriptions_plans_retrieve
      description: Retrieve detailed information about a subscription plan
      summary: Get subscription plan details
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this Subscription Plan.
        required: true
      tags:
      - Subscriptions - Public
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionPlan'
          description: ''
        '404':
          description: Plan not found
  /api/v1/subscriptions/plans/import-from-stripe/:
    post:
      operationId: v1_subscriptions_plans_import_from_stripe_create
      description: Create or update a subscription plan by importing details from
        Stripe using Price ID (admin only)
      summary: Import plan from Stripe
      tags:
      - Subscriptions - Admin
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StripePriceImportRequest'
            examples:
              ImportWithCustomName:
                value:
                  stripe_price_id: price_1234567890
                  name: Premium Plan
                summary: Import with Custom Name
              ImportWithStripeName:
                value:
                  stripe_price_id: price_1234567890
                summary: Import with Stripe Name
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StripePriceImportRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StripePriceImportRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionPlan'
          description: ''
        '400':
          description: Bad Request or Invalid Price ID
        '403':
          description: Forbidden - Admin only
  /api/v1/subscriptions/portal/:
    post:
      operationId: v1_subscriptions_portal_create
      description: Create Stripe billing portal session for subscription management
      summary: Access billing portal
      tags:
      - Subscriptions - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SubscriptionRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SubscriptionRequest'
        required: true
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillingPortalResponse'
          description: ''
        '400':
          description: No Stripe customer found
        '403':
          description: Forbidden - Clients only
  /api/v1/widgets/shop/{shop_id}/:
    get:
      operationId: v1_widgets_shop_retrieve
      description: "\n        Get or update widget configuration for a specific shop\
        \ (shop owners only).\n        \n        **GET:** Returns widget configuration.\
        \ Auto-creates with defaults if doesn't exist.\n        **PATCH:** Updates\
        \ widget configuration with provided fields.\n        \n        For PATCH\
        \ requests, you can upload images using multipart/form-data:\n        - `banner_image`:\
        \ Optional banner image file (JPEG, PNG, or WebP, max 5MB)\n        - `logo`:\
        \ Optional logo image file (JPEG, PNG, or WebP, max 5MB)\n        \n     \
        \   Other fields can be included as form fields or JSON body.\n        "
      summary: Get or update widget configuration by shop ID
      parameters:
      - in: path
        name: shop_id
        schema:
          type: string
          format: uuid
        description: Shop ID to get/update widget configuration for
        required: true
      tags:
      - Widget - Client
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetConfiguration'
              examples:
                GETResponse:
                  value:
                    id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                    shop: e188f3d1-921d-4261-9ea5-d6cfad62962a
                    shop_id: e188f3d1-921d-4261-9ea5-d6cfad62962a
                    shop_name: Elegant Beauty Salon
                    layout: card
                    primary_color: '#2563EB'
                    widget_width: 380
                    border_radius: 12
                    banner_image_url: http://localhost:8004/api/media/widgets/banners/abc123.jpg
                    logo_url: http://localhost:8004/api/media/widgets/logos/def456.png
                    button_text: Book Now
                    show_logo: true
                    text_align: center
                    is_active: true
                    created_at: '2024-12-01T10:00:00Z'
                    updated_at: '2024-12-10T15:30:00Z'
                  summary: GET Response
                PATCHResponse:
                  value:
                    id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                    shop: e188f3d1-921d-4261-9ea5-d6cfad62962a
                    layout: landscape
                    primary_color: '#FF5733'
                    banner_image_url: http://localhost:8004/api/media/widgets/banners/abc123.jpg
                    button_text: Reserve Your Spot
                    updated_at: '2024-12-13T17:00:00Z'
                  summary: PATCH Response
          description: ''
        '400':
          description: Bad Request - Invalid file type or size
        '403':
          description: Forbidden - You don't own this shop
        '404':
          description: Shop not found
    patch:
      operationId: v1_widgets_shop_partial_update
      description: "\n        Get or update widget configuration for a specific shop\
        \ (shop owners only).\n        \n        **GET:** Returns widget configuration.\
        \ Auto-creates with defaults if doesn't exist.\n        **PATCH:** Updates\
        \ widget configuration with provided fields.\n        \n        For PATCH\
        \ requests, you can upload images using multipart/form-data:\n        - `banner_image`:\
        \ Optional banner image file (JPEG, PNG, or WebP, max 5MB)\n        - `logo`:\
        \ Optional logo image file (JPEG, PNG, or WebP, max 5MB)\n        \n     \
        \   Other fields can be included as form fields or JSON body.\n        "
      summary: Get or update widget configuration by shop ID
      parameters:
      - in: path
        name: shop_id
        schema:
          type: string
          format: uuid
        description: Shop ID to get/update widget configuration for
        required: true
      tags:
      - Widget - Client
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                layout:
                  type: string
                  enum:
                  - card
                  - landscape
                  - minimal
                primary_color:
                  type: string
                  description: 'Hex color (e.g., #2563EB)'
                widget_width:
                  type: integer
                  minimum: 280
                  maximum: 800
                border_radius:
                  type: integer
                  maximum: 50
                custom_title:
                  type: string
                custom_description:
                  type: string
                button_text:
                  type: string
                  maxLength: 50
                show_logo:
                  type: boolean
                text_align:
                  type: string
                  enum:
                  - left
                  - center
                  - right
                is_active:
                  type: boolean
                banner_image:
                  type: string
                  format: binary
                  description: Optional banner image (JPEG, PNG, or WebP, max 5MB)
                logo:
                  type: string
                  format: binary
                  description: Optional logo image (JPEG, PNG, or WebP, max 5MB)
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetConfiguration'
              examples:
                GETResponse:
                  value:
                    id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                    shop: e188f3d1-921d-4261-9ea5-d6cfad62962a
                    shop_id: e188f3d1-921d-4261-9ea5-d6cfad62962a
                    shop_name: Elegant Beauty Salon
                    layout: card
                    primary_color: '#2563EB'
                    widget_width: 380
                    border_radius: 12
                    banner_image_url: http://localhost:8004/api/media/widgets/banners/abc123.jpg
                    logo_url: http://localhost:8004/api/media/widgets/logos/def456.png
                    button_text: Book Now
                    show_logo: true
                    text_align: center
                    is_active: true
                    created_at: '2024-12-01T10:00:00Z'
                    updated_at: '2024-12-10T15:30:00Z'
                  summary: GET Response
                PATCHResponse:
                  value:
                    id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                    shop: e188f3d1-921d-4261-9ea5-d6cfad62962a
                    layout: landscape
                    primary_color: '#FF5733'
                    banner_image_url: http://localhost:8004/api/media/widgets/banners/abc123.jpg
                    button_text: Reserve Your Spot
                    updated_at: '2024-12-13T17:00:00Z'
                  summary: PATCH Response
          description: ''
        '400':
          description: Bad Request - Invalid file type or size
        '403':
          description: Forbidden - You don't own this shop
        '404':
          description: Shop not found
  /api/v1/widgets/shop/{shop_id}/preview/:
    post:
      operationId: v1_widgets_shop_preview_create
      description: "\n        Generate preview data with temporary settings without\
        \ saving (shop owners only).\n        \n        This endpoint accepts optional\
        \ widget settings and returns preview data\n        combining the saved configuration\
        \ with temporary overrides.\n        Useful for live preview in the widget\
        \ configuration UI.\n        "
      summary: Preview widget with temporary settings
      parameters:
      - in: path
        name: shop_id
        schema:
          type: string
          format: uuid
        description: Shop ID to preview widget for
        required: true
      tags:
      - Widget - Client
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WidgetPreviewRequestRequest'
            examples:
              PreviewRequest:
                value:
                  primary_color: '#FF5733'
                  layout: minimal
                  button_text: Reserve Now
                summary: Preview Request
                description: Preview with temporary color, layout, and button text
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/WidgetPreviewRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/WidgetPreviewRequestRequest'
      security:
      - BearerAuth: []
      - ClerkUserAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetPreviewResponse'
              examples:
                CompletePreviewResponse:
                  value:
                    preview_url: http://localhost:8004/api/v1/widgets/shop/e188f3d1-921d-4261-9ea5-d6cfad62962a/preview/
                    preview_html: |-
                      <div class="widget-preview" style="width: 380px; border-radius: 12px; background-color: #ffffff; border: 2px solid #FF5733; padding: 20px; text-align: center;">
                        <h3>Elegant Beauty Salon</h3>
                        <p>Premium beauty services</p>
                        <button style="background-color: #FF5733; color: white; padding: 10px 20px; border: none; border-radius: 12px;">Reserve Now</button>
                      </div>
                    settings:
                      layout: minimal
                      primary_color: '#FF5733'
                      widget_width: 380
                      border_radius: 12
                      button_text: Reserve Now
                      show_logo: true
                      text_align: center
                  summary: Complete Preview Response
          description: ''
        '400':
          description: Bad Request - Invalid settings
        '403':
          description: Forbidden - You don't own this shop
        '404':
          description: Shop or widget configuration not found
components:
  schemas:
    ActionEnum:
      enum:
      - new
      - upgrade
      type: string
      description: |-
        * `new` - new
        * `upgrade` - upgrade
    ActionTaken:
      type: object
      description: Serializer for actions taken by the agent.
      properties:
        action_type:
          type: string
          description: Type of action (e.g., search_shops, create_booking)
        success:
          type: boolean
          description: Whether the action succeeded
        details:
          type: object
          additionalProperties: {}
          description: Action-specific details and results
      required:
      - action_type
      - success
    AvailableSlot:
      type: object
      description: Output serializer for a single available time slot.
      properties:
        start_time:
          type: string
          format: date-time
          description: Slot start time (ISO 8601 format)
        end_time:
          type: string
          format: date-time
          description: Slot end time (ISO 8601 format)
        available_staff:
          type: array
          items:
            $ref: '#/components/schemas/AvailableStaff'
          description: List of available staff members with full details
        available_staff_count:
          type: integer
          description: Number of staff members available for this slot
      required:
      - available_staff
      - available_staff_count
      - end_time
      - start_time
    AvailableStaff:
      type: object
      description: Staff member details for availability response.
      properties:
        id:
          type: string
          format: uuid
          description: Staff member UUID
        name:
          type: string
          description: Staff member name
        email:
          type: string
          format: email
          nullable: true
          description: Staff member email
        phone:
          type: string
          nullable: true
          description: Staff member phone
        profile_image_url:
          type: string
          format: uri
          nullable: true
          description: Staff profile image URL
        is_primary:
          type: boolean
          description: Is primary staff for this service
      required:
      - id
      - name
    BillingPortalResponse:
      type: object
      description: Serializer for billing portal session response.
      properties:
        portal_url:
          type: string
          format: uri
          description: URL to Stripe billing portal
      required:
      - portal_url
    Booking:
      type: object
      description: Detailed booking serializer for output - supports both service
        and deal bookings
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        customer:
          type: string
          format: uuid
          readOnly: true
        customer_name:
          type: string
          readOnly: true
        customer_email:
          type: string
          format: email
          readOnly: true
        shop:
          type: string
          format: uuid
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        service:
          type: string
          format: uuid
          nullable: true
          description: Service booked (NULL for deal bookings or if service was deleted)
        service_name:
          type: string
          readOnly: true
          nullable: true
        service_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          nullable: true
        deal:
          type: string
          format: uuid
          nullable: true
          description: Deal/package booked (NULL for service bookings)
        deal_name:
          type: string
          readOnly: true
          nullable: true
        deal_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          nullable: true
        deal_items:
          readOnly: true
        time_slot:
          type: string
          format: uuid
          nullable: true
          description: 'Optional: Only set for bookings created from pre-generated
            TimeSlots'
        staff_member:
          type: string
          format: uuid
          nullable: true
          description: Staff member assigned to this booking (NULL for deal bookings)
        staff_member_name:
          type: string
          readOnly: true
          nullable: true
        booking_datetime:
          type: string
          format: date-time
        duration_minutes:
          type: integer
          maximum: 2147483647
          minimum: 0
          description: Duration of the booking in minutes (from service or deal duration)
        status:
          $ref: '#/components/schemas/Status728Enum'
        total_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        notes:
          type: string
        is_deal_booking:
          type: boolean
          readOnly: true
        cancellation_reason:
          type: string
        cancelled_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - booking_datetime
      - cancelled_at
      - created_at
      - customer
      - customer_email
      - customer_name
      - deal_items
      - deal_name
      - deal_price
      - id
      - is_deal_booking
      - service_name
      - service_price
      - shop
      - shop_name
      - staff_member_name
      - total_price
      - updated_at
    BookingList:
      type: object
      description: Simplified booking serializer for lists - supports both service
        and deal bookings
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        customer_name:
          type: string
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        service_name:
          type: string
          readOnly: true
          nullable: true
        deal_name:
          type: string
          readOnly: true
          nullable: true
        item_name:
          type: string
          readOnly: true
        is_deal_booking:
          type: boolean
          readOnly: true
        staff_member_name:
          type: string
          readOnly: true
          nullable: true
        booking_datetime:
          type: string
          format: date-time
        duration_minutes:
          type: integer
          maximum: 2147483647
          minimum: 0
          description: Duration of the booking in minutes (from service or deal duration)
        status:
          $ref: '#/components/schemas/Status728Enum'
        payment_status:
          type: string
          readOnly: true
        can_pay:
          type: string
          readOnly: true
          description: True if booking can be paid (pending and within 15-min window)
        client_secret:
          type: string
          readOnly: true
          description: Stripe client_secret for payment (null if not payable)
        payment_expires_at:
          type: string
          readOnly: true
          description: When payment window expires
        time_remaining_seconds:
          type: string
          readOnly: true
          description: Seconds remaining to pay
        payment_amount:
          type: string
          readOnly: true
          description: Advance payment amount
        total_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - booking_datetime
      - can_pay
      - client_secret
      - created_at
      - customer_name
      - deal_name
      - id
      - is_deal_booking
      - item_name
      - payment_amount
      - payment_expires_at
      - payment_status
      - service_name
      - shop_name
      - staff_member_name
      - time_remaining_seconds
      - total_price
    BookingStats:
      type: object
      description: Output serializer for shop booking statistics (salon owners)
      properties:
        total_bookings:
          type: integer
          description: Total number of bookings
        pending:
          type: integer
          description: Pending bookings count
        confirmed:
          type: integer
          description: Confirmed bookings count
        completed:
          type: integer
          description: Completed bookings count
        cancelled:
          type: integer
          description: Cancelled bookings count
        no_show:
          type: integer
          description: No-show bookings count
        total_revenue:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Total revenue from completed bookings (same as total_earnings)
        total_earnings:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Total earnings from completed bookings at this shop
        total_advance_payments:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Total advance payments received (deposits)
      required:
      - cancelled
      - completed
      - confirmed
      - no_show
      - pending
      - total_advance_payments
      - total_bookings
      - total_earnings
      - total_revenue
    BookingWithPaymentResponse:
      type: object
      description: |-
        Complete booking response including payment information.

        This serializer documents the full response structure returned by
        booking creation endpoints when they include payment details.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        customer:
          type: string
          format: uuid
          readOnly: true
        customer_name:
          type: string
          readOnly: true
        customer_email:
          type: string
          format: email
          readOnly: true
        shop:
          type: string
          format: uuid
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        service:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        service_name:
          type: string
          readOnly: true
          nullable: true
        service_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          nullable: true
        deal:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        deal_name:
          type: string
          readOnly: true
          nullable: true
        deal_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          nullable: true
        deal_items:
          readOnly: true
        staff_member:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        staff_member_name:
          type: string
          readOnly: true
          nullable: true
        booking_datetime:
          type: string
          format: date-time
          readOnly: true
        duration_minutes:
          type: integer
          readOnly: true
        status:
          type: string
          readOnly: true
        payment_status:
          type: string
          readOnly: true
        total_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        notes:
          type: string
          readOnly: true
        is_deal_booking:
          type: boolean
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        payment:
          allOf:
          - $ref: '#/components/schemas/PaymentInfo'
          description: Payment information for this booking
      required:
      - booking_datetime
      - created_at
      - customer
      - customer_email
      - customer_name
      - deal
      - deal_items
      - deal_name
      - deal_price
      - duration_minutes
      - id
      - is_deal_booking
      - notes
      - payment
      - payment_status
      - service
      - service_name
      - service_price
      - shop
      - shop_name
      - staff_member
      - staff_member_name
      - status
      - total_price
      - updated_at
    BulkScheduleCreateRequest:
      type: object
      description: |-
        Serializer for creating schedules for multiple days at once.

        Set shop hours for selected days (e.g., Monday, Wednesday, Friday).
        Days don't need to be sequential - select any days you want.
        Slot duration is determined by service duration, not fixed intervals.
      properties:
        shop_id:
          type: string
          format: uuid
          description: UUID of the shop
        days:
          type: array
          items:
            $ref: '#/components/schemas/DayNameEnum'
          description: List of days to set schedule for (e.g., ['monday', 'wednesday',
            'friday'])
          minItems: 1
        start_time:
          type: string
          format: time
          description: Opening time (e.g., '09:00')
        end_time:
          type: string
          format: time
          description: Closing time (e.g., '18:00')
      required:
      - days
      - end_time
      - shop_id
      - start_time
    BulkScheduleResponse:
      type: object
      description: Response serializer for bulk schedule creation.
      properties:
        message:
          type: string
        schedules_created:
          type: integer
        schedules_updated:
          type: integer
        days:
          type: array
          items:
            type: string
        shop_hours:
          type: object
          additionalProperties: {}
          description: Shop opening/closing times applied
      required:
      - days
      - message
      - schedules_created
      - schedules_updated
      - shop_hours
    CalendarIntegration:
      type: object
      description: User's calendar integration status
      properties:
        is_connected:
          type: boolean
          readOnly: true
        google_calendar_id:
          type: string
          description: ID of the Google Calendar to sync events to
          maxLength: 255
        is_sync_enabled:
          type: boolean
        last_sync_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
      required:
      - is_connected
      - last_sync_at
    ChatMessage:
      type: object
      description: Serializer for chat messages.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        role:
          $ref: '#/components/schemas/ChatMessageRoleEnum'
        content:
          type: string
        tool_name:
          type: string
          maxLength: 100
        is_error:
          type: boolean
        error_message:
          type: string
        tokens_total:
          type: string
          readOnly: true
          description: Total tokens (prompt + completion)
        processing_time_ms:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Time taken to generate response in milliseconds
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - content
      - created_at
      - id
      - role
      - tokens_total
    ChatMessageRoleEnum:
      enum:
      - user
      - assistant
      - system
      - tool
      type: string
      description: |-
        * `user` - User
        * `assistant` - AI Assistant
        * `system` - System
        * `tool` - Tool Result
    ChatRequestRequest:
      type: object
      description: Request serializer for chat endpoint.
      properties:
        message:
          type: string
          minLength: 1
          description: User message to send to the AI agent (max 4000 characters)
          maxLength: 4000
        session_id:
          type: string
          description: UUID session ID to continue an existing conversation. The session_id
            maintains conversation history and context, allowing the AI to remember
            previous messages in the chat. Omit this field to start a NEW conversation.
            Include the session_id from a previous response to CONTINUE that conversation.
          maxLength: 255
      required:
      - message
    ChatResponse:
      type: object
      description: Response serializer for chat endpoint.
      properties:
        response:
          type: string
          description: AI agent response message
        session_id:
          type: string
          description: UUID session ID for continuing this conversation
        message_id:
          type: string
          format: uuid
          description: Unique ID of this assistant message
        actions_taken:
          type: array
          items:
            $ref: '#/components/schemas/ActionTaken'
          description: List of tool actions executed by the agent
        tokens_used:
          allOf:
          - $ref: '#/components/schemas/TokensUsed'
          description: Token usage for this request
      required:
      - message_id
      - response
      - session_id
    ChatSession:
      type: object
      description: Serializer for chat session with messages.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        session_id:
          type: string
          maxLength: 255
        user_email:
          type: string
          readOnly: true
          description: Email of the session owner
        user_role:
          $ref: '#/components/schemas/UserRoleEnum'
        shop_name:
          type: string
          readOnly: true
          nullable: true
          description: Current shop being discussed (if any)
        is_active:
          type: boolean
        message_count:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        total_tokens_used:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        summary:
          type: string
          description: AI-generated summary of older messages for context management
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        messages:
          type: array
          items:
            $ref: '#/components/schemas/ChatMessage'
          readOnly: true
      required:
      - created_at
      - id
      - messages
      - session_id
      - shop_name
      - updated_at
      - user_email
      - user_role
    ChatSessionList:
      type: object
      description: Serializer for listing chat sessions (without messages).
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        session_id:
          type: string
          maxLength: 255
        user_role:
          $ref: '#/components/schemas/UserRoleEnum'
        is_active:
          type: boolean
        message_count:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        last_message_preview:
          type: string
          readOnly: true
          description: Preview of the last assistant message
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - last_message_preview
      - session_id
      - updated_at
      - user_role
    CheckoutError:
      type: object
      description: Serializer for checkout error responses (downgrade/same tier).
      properties:
        error:
          $ref: '#/components/schemas/ErrorEnum'
        message:
          type: string
        current_plan:
          type: string
        requested_plan:
          type: string
      required:
      - error
      - message
    CheckoutSessionRequestRequest:
      type: object
      description: Serializer for checkout session creation request.
      properties:
        stripe_price_id:
          type: string
          minLength: 1
          description: Stripe Price ID of the subscription plan
      required:
      - stripe_price_id
    CheckoutSessionResponse:
      type: object
      description: Serializer for checkout session response.
      properties:
        checkout_url:
          type: string
          format: uri
          description: URL to redirect user to Stripe Checkout
        session_id:
          type: string
          description: Stripe Checkout Session ID
        action:
          allOf:
          - $ref: '#/components/schemas/ActionEnum'
          description: |-
            Type of action (new subscription or upgrade)

            * `new` - new
            * `upgrade` - upgrade
        message:
          type: string
          description: User-friendly message
      required:
      - action
      - checkout_url
      - message
      - session_id
    Client:
      type: object
      description: Serializer for Client model
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        user:
          type: string
          readOnly: true
        user_email:
          type: string
          format: email
          readOnly: true
        user_name:
          type: string
          readOnly: true
        business_name:
          type: string
          maxLength: 255
        phone:
          type: string
          maxLength: 20
        business_address:
          type: string
        tax_id:
          type: string
          maxLength: 50
        subscription_status:
          $ref: '#/components/schemas/SubscriptionStatusEnum'
        subscription_plan:
          type: string
          maxLength: 50
        subscription_expires_at:
          type: string
          format: date-time
          nullable: true
        max_shops:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        scraping_limit:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Maximum number of websites that can be scraped
        scraping_count:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Current count of completed scrape jobs
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - business_name
      - created_at
      - id
      - phone
      - updated_at
      - user
      - user_email
      - user_name
    ClientCreateUpdate:
      type: object
      description: Serializer for creating/updating client profile
      properties:
        business_name:
          type: string
          maxLength: 255
        phone:
          type: string
          maxLength: 20
        business_address:
          type: string
        tax_id:
          type: string
          maxLength: 50
      required:
      - business_name
      - phone
    ClientCreateUpdateRequest:
      type: object
      description: Serializer for creating/updating client profile
      properties:
        business_name:
          type: string
          minLength: 1
          maxLength: 255
        phone:
          type: string
          minLength: 1
          maxLength: 20
        business_address:
          type: string
        tax_id:
          type: string
          maxLength: 50
      required:
      - business_name
      - phone
    ClientTotalEarnings:
      type: object
      description: Response serializer for client's total earnings across all shops
      properties:
        total_earnings:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Grand total earnings from all shops
        total_advance_payments:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          description: Grand total of advance payments received (deposits)
        total_shops:
          type: integer
          description: Number of shops owned
        total_completed_bookings:
          type: integer
          description: Total completed bookings across all shops
        shops:
          type: array
          items:
            $ref: '#/components/schemas/ShopEarnings'
          description: Earnings breakdown per shop
      required:
      - shops
      - total_advance_payments
      - total_completed_bookings
      - total_earnings
      - total_shops
    CurrentSubscription:
      type: object
      description: Detailed serializer for current subscription with additional context.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        plan_name:
          type: string
          readOnly: true
        plan_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        plan_features:
          readOnly: true
        status:
          type: string
          description: 'Subscription status: active, past_due, canceled, unpaid'
          maxLength: 20
        current_period_start:
          type: string
          format: date-time
          description: Current billing period start
        current_period_end:
          type: string
          format: date-time
          description: Current billing period end
        cancel_at_period_end:
          type: boolean
          description: Whether subscription will cancel at period end
        days_remaining:
          type: string
          readOnly: true
        shops_count:
          type: string
          readOnly: true
        can_create_shop:
          type: string
          readOnly: true
      required:
      - can_create_shop
      - current_period_end
      - current_period_start
      - days_remaining
      - id
      - plan_amount
      - plan_features
      - plan_name
      - shops_count
      - status
    Customer:
      type: object
      description: Serializer for Customer model
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        user:
          type: string
          readOnly: true
        user_email:
          type: string
          format: email
          readOnly: true
        user_name:
          type: string
          readOnly: true
        phone:
          type: string
          maxLength: 20
        date_of_birth:
          type: string
          format: date
          nullable: true
        subscription_status:
          allOf:
          - $ref: '#/components/schemas/SubscriptionStatusEnum'
          readOnly: true
        subscription_plan:
          type: string
          readOnly: true
        subscription_expires_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        favorite_shops_count:
          type: integer
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - favorite_shops_count
      - id
      - subscription_expires_at
      - subscription_plan
      - subscription_status
      - updated_at
      - user
      - user_email
      - user_name
    CustomerBookingStats:
      type: object
      description: Output serializer for customer booking statistics
      properties:
        upcoming:
          type: integer
          description: Number of upcoming bookings (pending/confirmed)
        past_due:
          type: integer
          description: Past bookings still pending/confirmed
        completed:
          type: integer
          description: Completed bookings count
        cancelled:
          type: integer
          description: Cancelled bookings count
        total:
          type: integer
          description: Total number of bookings
        total_spending:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Total amount spent on completed bookings (full service prices)
        total_advance_payments:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Total advance payments made (deposits)
      required:
      - cancelled
      - completed
      - past_due
      - total
      - total_advance_payments
      - total_spending
      - upcoming
    DayNameEnum:
      enum:
      - monday
      - tuesday
      - wednesday
      - thursday
      - friday
      - saturday
      - sunday
      type: string
      description: |-
        * `monday` - Monday
        * `tuesday` - Tuesday
        * `wednesday` - Wednesday
        * `thursday` - Thursday
        * `friday` - Friday
        * `saturday` - Saturday
        * `sunday` - Sunday
    Deal:
      type: object
      description: Response serializer for Deal model
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        shop:
          type: string
          format: uuid
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        name:
          type: string
          maxLength: 255
        description:
          type: string
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        duration_minutes:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Duration in minutes for deal booking slots
        included_items: {}
        items_count:
          type: string
          readOnly: true
        is_active:
          type: boolean
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - items_count
      - name
      - price
      - shop
      - shop_name
      - updated_at
    DealAvailability:
      type: object
      description: Output serializer for deal availability check.
      properties:
        deal_id:
          type: string
          format: uuid
        deal_name:
          type: string
        deal_duration_minutes:
          type: integer
        date:
          type: string
          format: date
        shop_open:
          type: string
          format: time
          nullable: true
        shop_close:
          type: string
          format: time
          nullable: true
        max_concurrent:
          type: integer
          description: Max concurrent deal bookings for shop
        slots:
          type: array
          items:
            $ref: '#/components/schemas/DealSlot'
      required:
      - date
      - deal_duration_minutes
      - deal_id
      - deal_name
      - max_concurrent
      - shop_close
      - shop_open
      - slots
    DealBookingCreateRequest:
      type: object
      description: |-
        Input serializer for creating deal bookings.

        Deal bookings don't require staff - just based on shop hours and capacity.
      properties:
        deal_id:
          type: string
          format: uuid
          description: UUID of the deal to book
        date:
          type: string
          format: date
          description: Date of the booking (YYYY-MM-DD)
        start_time:
          type: string
          format: time
          description: Start time for the booking (HH:MM)
        notes:
          type: string
          description: Optional notes for the booking
          maxLength: 500
      required:
      - date
      - deal_id
      - start_time
    DealCreateUpdateRequest:
      type: object
      description: Input serializer for creating/updating deals
      properties:
        shop_id:
          type: string
          format: uuid
          writeOnly: true
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        duration_minutes:
          type: integer
          maximum: 480
          minimum: 15
          default: 60
          description: Duration in minutes for deal booking slots (default 60)
        included_items:
          type: array
          items:
            type: string
            minLength: 1
            maxLength: 255
          description: List of services/items included in this deal
        is_active:
          type: boolean
      required:
      - included_items
      - name
      - price
    DealSlot:
      type: object
      description: Output serializer for deal availability slots with capacity info.
      properties:
        start_time:
          type: string
          format: date-time
          description: Slot start time
        end_time:
          type: string
          format: date-time
          description: Slot end time
        slots_left:
          type: integer
          description: Number of available slots (out of max concurrent)
        is_available:
          type: boolean
          description: True if at least 1 slot is available
      required:
      - end_time
      - is_available
      - slots_left
      - start_time
    DeleteNotificationResponse:
      type: object
      description: Response serializer for deleting notifications.
      properties:
        message:
          type: string
          description: Success message
        deleted_count:
          type: integer
          description: Number of notifications deleted
      required:
      - deleted_count
      - message
    DeviceTypeEnum:
      enum:
      - ios
      - android
      - web
      type: string
      description: |-
        * `ios` - iOS
        * `android` - Android
        * `web` - Web
    DynamicAvailabilityRequestRequest:
      type: object
      description: |-
        Input serializer for dynamic availability calculator.

        Computes available time slots on-the-fly based on:
        - Shop schedule (open/close times)
        - Service duration (slots are generated based on service duration)
        - Staff availability (booking conflicts)
        - Service buffer_minutes (minimum time before booking)
      properties:
        service_id:
          type: string
          format: uuid
          description: UUID of the service to check availability for
        date:
          type: string
          format: date
          description: Target date to check availability (YYYY-MM-DD format)
        buffer_minutes_override:
          type: integer
          maximum: 120
          minimum: 0
          description: Optional override for minimum minutes from now. If not provided,
            uses service.buffer_minutes.
      required:
      - date
      - service_id
    DynamicAvailabilityResponse:
      type: object
      description: |-
        Full response for dynamic availability check.

        Contains shop/service context, shop hours, and list of available slots.
      properties:
        shop_id:
          type: string
          format: uuid
          description: Shop UUID
        shop_name:
          type: string
          description: Shop name
        shop_timezone:
          type: string
          description: Shop timezone (IANA format, e.g., 'Asia/Karachi', 'Europe/London')
        service_id:
          type: string
          format: uuid
          description: Service UUID
        service_name:
          type: string
          description: Service name
        service_duration_minutes:
          type: integer
          description: Service duration in minutes
        date:
          type: string
          format: date
          description: Target date
        is_shop_open:
          type: boolean
          description: Whether the shop is open on this date
        shop_hours:
          allOf:
          - $ref: '#/components/schemas/ShopHours'
          nullable: true
          description: Shop hours for this date (null if closed)
        available_slots:
          type: array
          items:
            $ref: '#/components/schemas/AvailableSlot'
          description: List of available time slots
        total_available_slots:
          type: integer
          description: Total number of available slots
        eligible_staff_count:
          type: integer
          description: Number of staff members who can perform this service
      required:
      - available_slots
      - date
      - eligible_staff_count
      - is_shop_open
      - service_duration_minutes
      - service_id
      - service_name
      - shop_id
      - shop_name
      - shop_timezone
      - total_available_slots
    DynamicBookingCreateRequest:
      type: object
      description: |-
        Input serializer for creating bookings without pre-created TimeSlots.

        Uses dynamic availability to validate and create bookings directly
        from a service_id, date, and start_time.
      properties:
        service_id:
          type: string
          format: uuid
          description: UUID of the service to book
        date:
          type: string
          format: date
          description: Date of the booking (YYYY-MM-DD)
        start_time:
          type: string
          format: time
          description: Start time for the booking (HH:MM)
        staff_member_id:
          type: string
          format: uuid
          nullable: true
          description: 'Optional: Select a specific staff member'
        notes:
          type: string
          description: Optional notes for the booking
          maxLength: 500
      required:
      - date
      - service_id
      - start_time
    ErrorEnum:
      enum:
      - downgrade_not_allowed
      - already_subscribed
      - validation_error
      type: string
      description: |-
        * `downgrade_not_allowed` - downgrade_not_allowed
        * `already_subscribed` - already_subscribed
        * `validation_error` - validation_error
    ErrorResponse:
      type: object
      description: Generic error response
      properties:
        error:
          type: string
      required:
      - error
    ExtractedData:
      type: object
      description: Nested serializer for all extracted data
      properties:
        shop:
          $ref: '#/components/schemas/ExtractedShopData'
        services:
          type: array
          items:
            $ref: '#/components/schemas/ExtractedServiceData'
        deals:
          type: array
          items:
            $ref: '#/components/schemas/ExtractedDealData'
        schedule:
          type: array
          items:
            $ref: '#/components/schemas/ExtractedScheduleData'
    ExtractedDealData:
      type: object
      description: Serializer for extracted deal data
      properties:
        name:
          type: string
          description: Deal/package name
          maxLength: 255
        description:
          type: string
          description: Deal description
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Bundle price
        duration_minutes:
          type: integer
          maximum: 480
          minimum: 15
          default: 60
          description: Total duration for the deal booking in minutes (default 60)
        included_items:
          type: array
          items:
            type: string
            maxLength: 255
          description: List of services/items included in the deal
      required:
      - included_items
      - name
      - price
    ExtractedDealDataRequest:
      type: object
      description: Serializer for extracted deal data
      properties:
        name:
          type: string
          minLength: 1
          description: Deal/package name
          maxLength: 255
        description:
          type: string
          description: Deal description
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Bundle price
        duration_minutes:
          type: integer
          maximum: 480
          minimum: 15
          default: 60
          description: Total duration for the deal booking in minutes (default 60)
        included_items:
          type: array
          items:
            type: string
            minLength: 1
            maxLength: 255
          description: List of services/items included in the deal
      required:
      - included_items
      - name
      - price
    ExtractedScheduleData:
      type: object
      description: Serializer for extracted schedule data
      properties:
        day_of_week:
          allOf:
          - $ref: '#/components/schemas/ExtractedScheduleDataDayOfWeekEnum'
          description: |-
            Day of the week

            * `monday` - monday
            * `tuesday` - tuesday
            * `wednesday` - wednesday
            * `thursday` - thursday
            * `friday` - friday
            * `saturday` - saturday
            * `sunday` - sunday
        start_time:
          type: string
          format: time
          nullable: true
          description: Opening time (HH:MM)
        end_time:
          type: string
          format: time
          nullable: true
          description: Closing time (HH:MM)
        is_closed:
          type: boolean
          default: false
          description: True if closed on this day
      required:
      - day_of_week
    ExtractedScheduleDataDayOfWeekEnum:
      enum:
      - monday
      - tuesday
      - wednesday
      - thursday
      - friday
      - saturday
      - sunday
      type: string
      description: |-
        * `monday` - monday
        * `tuesday` - tuesday
        * `wednesday` - wednesday
        * `thursday` - thursday
        * `friday` - friday
        * `saturday` - saturday
        * `sunday` - sunday
    ExtractedScheduleDataRequest:
      type: object
      description: Serializer for extracted schedule data
      properties:
        day_of_week:
          allOf:
          - $ref: '#/components/schemas/ExtractedScheduleDataDayOfWeekEnum'
          description: |-
            Day of the week

            * `monday` - monday
            * `tuesday` - tuesday
            * `wednesday` - wednesday
            * `thursday` - thursday
            * `friday` - friday
            * `saturday` - saturday
            * `sunday` - sunday
        start_time:
          type: string
          format: time
          nullable: true
          description: Opening time (HH:MM)
        end_time:
          type: string
          format: time
          nullable: true
          description: Closing time (HH:MM)
        is_closed:
          type: boolean
          default: false
          description: True if closed on this day
      required:
      - day_of_week
    ExtractedServiceData:
      type: object
      description: Serializer for extracted service data
      properties:
        name:
          type: string
          description: Service name
          maxLength: 255
        description:
          type: string
          description: Service description
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Price in dollars
        duration_minutes:
          type: integer
          maximum: 480
          minimum: 15
          description: Duration in minutes
        category:
          type: string
          description: Service category
          maxLength: 100
      required:
      - duration_minutes
      - name
      - price
    ExtractedServiceDataRequest:
      type: object
      description: Serializer for extracted service data
      properties:
        name:
          type: string
          minLength: 1
          description: Service name
          maxLength: 255
        description:
          type: string
          description: Service description
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Price in dollars
        duration_minutes:
          type: integer
          maximum: 480
          minimum: 15
          description: Duration in minutes
        category:
          type: string
          description: Service category
          maxLength: 100
      required:
      - duration_minutes
      - name
      - price
    ExtractedShopData:
      type: object
      description: Serializer for extracted shop data
      properties:
        name:
          type: string
          description: Shop/salon name
          maxLength: 255
        description:
          type: string
          description: Shop description
        address:
          type: string
          description: Street address
          maxLength: 500
        city:
          type: string
          description: City
          maxLength: 100
        state:
          type: string
          description: State/Province
          maxLength: 100
        postal_code:
          type: string
          description: ZIP/Postal code
          maxLength: 20
        country:
          type: string
          default: USA
          description: Country
          maxLength: 100
        phone:
          type: string
          description: Phone number
          maxLength: 20
        email:
          type: string
          format: email
          description: Email address
        website:
          type: string
          format: uri
          description: Website URL
        timezone:
          type: string
          default: UTC
          description: Timezone (IANA format)
          maxLength: 63
    ExtractedShopDataRequest:
      type: object
      description: Serializer for extracted shop data
      properties:
        name:
          type: string
          minLength: 1
          description: Shop/salon name
          maxLength: 255
        description:
          type: string
          description: Shop description
        address:
          type: string
          description: Street address
          maxLength: 500
        city:
          type: string
          description: City
          maxLength: 100
        state:
          type: string
          description: State/Province
          maxLength: 100
        postal_code:
          type: string
          description: ZIP/Postal code
          maxLength: 20
        country:
          type: string
          minLength: 1
          default: USA
          description: Country
          maxLength: 100
        phone:
          type: string
          description: Phone number
          maxLength: 20
        email:
          type: string
          format: email
          description: Email address
        website:
          type: string
          format: uri
          description: Website URL
        timezone:
          type: string
          minLength: 1
          default: UTC
          description: Timezone (IANA format)
          maxLength: 63
    FCMTokenRequest:
      type: object
      description: Input serializer for registering FCM device tokens.
      properties:
        fcm_token:
          type: string
          minLength: 1
          description: Firebase Cloud Messaging device token
          maxLength: 500
        device_type:
          allOf:
          - $ref: '#/components/schemas/DeviceTypeEnum'
          default: web
          description: |-
            Type of device (ios, android, web)

            * `ios` - iOS
            * `android` - Android
            * `web` - Web
        device_name:
          type: string
          description: Optional device name for identification (e.g., "iPhone 15 Pro")
          maxLength: 255
      required:
      - fcm_token
    FCMTokenResponse:
      type: object
      description: Response serializer for FCM token operations.
      properties:
        message:
          type: string
          description: Operation result message
        device_id:
          type: string
          description: ID of the registered device
        is_new:
          type: boolean
          description: True if this is a new registration
      required:
      - device_id
      - is_new
      - message
    GoogleCalendarList:
      type: object
      description: Response for listing available Google Calendars
      properties:
        id:
          type: string
          description: Calendar ID to use in settings
        summary:
          type: string
          description: Human-readable calendar name
        primary:
          type: boolean
          description: Is this the user's primary calendar
      required:
      - id
      - primary
      - summary
    HealthCheck:
      type: object
      description: Serializer for health check response
      properties:
        status:
          type: string
        timestamp:
          type: string
          format: date-time
        database:
          type: string
        cache:
          type: string
      required:
      - cache
      - database
      - status
      - timestamp
    Holiday:
      type: object
      description: Serializer for Holiday model.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        shop:
          type: string
          format: uuid
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        date:
          type: string
          format: date
        name:
          type: string
          description: Optional name for the holiday (e.g., Christmas, Eid)
          maxLength: 100
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - date
      - id
      - shop
      - shop_name
      - updated_at
    HolidayBulkResponse:
      type: object
      description: Response serializer for bulk holiday creation.
      properties:
        message:
          type: string
        holidays_created:
          type: integer
        holidays_skipped:
          type: integer
          description: Number of dates skipped (already exist)
        dates:
          type: array
          items:
            type: string
            format: date
        shop_id:
          type: string
          format: uuid
      required:
      - dates
      - holidays_created
      - holidays_skipped
      - message
      - shop_id
    HolidayCreateRequest:
      type: object
      description: |-
        Serializer for creating holidays.

        Supports multiple input formats:
        - dates: List of individual dates
        - start_date + end_date: Date range

        At least one format must be provided.
      properties:
        shop_id:
          type: string
          format: uuid
          description: UUID of the shop
        dates:
          type: array
          items:
            type: string
            format: date
          description: List of dates to mark as holidays (e.g., ['2024-12-25', '2024-12-26'])
          minItems: 1
        start_date:
          type: string
          format: date
          description: Start date for a range (inclusive)
        end_date:
          type: string
          format: date
          description: End date for a range (inclusive)
        name:
          type: string
          minLength: 1
          default: ''
          description: Optional name for the holiday (e.g., 'Christmas', 'Eid')
          maxLength: 100
      required:
      - shop_id
    HolidayDeleteRequest:
      type: object
      description: Serializer for deleting holidays.
      properties:
        shop_id:
          type: string
          format: uuid
          description: UUID of the shop
        dates:
          type: array
          items:
            type: string
            format: date
          description: List of specific dates to remove as holidays
        start_date:
          type: string
          format: date
          description: Start date for a range to delete (inclusive)
        end_date:
          type: string
          format: date
          description: End date for a range to delete (inclusive)
      required:
      - shop_id
    HolidayDeleteResponse:
      type: object
      description: Response serializer for holiday deletion.
      properties:
        message:
          type: string
        holidays_deleted:
          type: integer
        dates:
          type: array
          items:
            type: string
            format: date
      required:
      - dates
      - holidays_deleted
      - message
    InviteStatusEnum:
      enum:
      - pending
      - sent
      - accepted
      - expired
      type: string
      description: |-
        * `pending` - Pending
        * `sent` - Sent
        * `accepted` - Accepted
        * `expired` - Expired
    MarkNotificationReadRequest:
      type: object
      description: Input serializer for marking notifications as read.
      properties:
        notification_ids:
          type: array
          items:
            type: string
            format: uuid
          description: List of notification IDs to mark as read. If empty or not provided,
            marks all as read.
    MarkNotificationReadResponse:
      type: object
      description: Response serializer for marking notifications as read.
      properties:
        message:
          type: string
          description: Success message
        updated_count:
          type: integer
          description: Number of notifications marked as read
      required:
      - message
      - updated_count
    MessageResponse:
      type: object
      description: Generic message response
      properties:
        message:
          type: string
      required:
      - message
    Notification:
      type: object
      description: Serializer for in-app notifications.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        title:
          type: string
          readOnly: true
        message:
          type: string
          readOnly: true
        notification_type:
          allOf:
          - $ref: '#/components/schemas/NotificationNotificationTypeEnum'
          readOnly: true
        notification_type_display:
          type: string
          readOnly: true
          description: Human-readable notification type
        is_read:
          type: boolean
        read_at:
          type: string
          format: date-time
          nullable: true
        related_object_type:
          type: string
          readOnly: true
        related_object_id:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        metadata:
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - message
      - metadata
      - notification_type
      - notification_type_display
      - related_object_id
      - related_object_type
      - title
    NotificationCount:
      type: object
      description: Serializer for notification counts.
      properties:
        total:
          type: integer
          description: Total number of notifications
        unread:
          type: integer
          description: Number of unread notifications
      required:
      - total
      - unread
    NotificationNotificationTypeEnum:
      enum:
      - booking_confirmation
      - booking_cancellation
      - booking_reschedule
      - booking_reminder_1day
      - booking_reminder_1hour
      - staff_assignment
      - shop_holiday
      - new_booking
      - payment_success
      - payment_failed
      - system
      - payment
      type: string
      description: |-
        * `booking_confirmation` - Booking Confirmation
        * `booking_cancellation` - Booking Cancellation
        * `booking_reschedule` - Booking Rescheduled
        * `booking_reminder_1day` - Booking Reminder (1 Day)
        * `booking_reminder_1hour` - Booking Reminder (1 Hour)
        * `staff_assignment` - Staff Assignment Changed
        * `shop_holiday` - Shop Holiday
        * `new_booking` - New Booking (for staff/client)
        * `payment_success` - Payment Successful
        * `payment_failed` - Payment Failed
        * `system` - System Notification
        * `payment` - Payment Notification
    NotificationPreference:
      type: object
      description: Serializer for user notification preferences.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        email_booking_confirmation:
          type: boolean
          description: Receive email when booking is confirmed
        email_booking_cancellation:
          type: boolean
          description: Receive email when booking is cancelled
        email_booking_reschedule:
          type: boolean
          description: Receive email when booking is rescheduled
        email_booking_reminder:
          type: boolean
          description: Receive reminder emails before appointments
        email_staff_assignment:
          type: boolean
          description: Receive email when staff member is changed
        email_shop_holiday:
          type: boolean
          description: Receive email about shop holiday closures
        email_marketing:
          type: boolean
          description: Receive marketing and promotional emails
        push_enabled:
          type: boolean
          description: Enable in-app push notifications
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - id
      - updated_at
    NotificationPreferenceRequest:
      type: object
      description: Serializer for user notification preferences.
      properties:
        email_booking_confirmation:
          type: boolean
          description: Receive email when booking is confirmed
        email_booking_cancellation:
          type: boolean
          description: Receive email when booking is cancelled
        email_booking_reschedule:
          type: boolean
          description: Receive email when booking is rescheduled
        email_booking_reminder:
          type: boolean
          description: Receive reminder emails before appointments
        email_staff_assignment:
          type: boolean
          description: Receive email when staff member is changed
        email_shop_holiday:
          type: boolean
          description: Receive email about shop holiday closures
        email_marketing:
          type: boolean
          description: Receive marketing and promotional emails
        push_enabled:
          type: boolean
          description: Enable in-app push notifications
    OwnerRescheduleRequest:
      type: object
      description: |-
        Serializer for shop owner to reschedule a booking.

        Uses dynamic availability to validate the new slot.
        The new slot must be available (shop open, staff available).
      properties:
        date:
          type: string
          format: date
          description: New date for the booking (YYYY-MM-DD)
        start_time:
          type: string
          format: time
          description: New start time for the booking (HH:MM)
      required:
      - date
      - start_time
    PaginatedBookingListList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/BookingList'
    PaginatedClientList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Client'
    PaginatedDealList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Deal'
    PaginatedHolidayList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Holiday'
    PaginatedNotificationList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Notification'
    PaginatedPaymentList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Payment'
    PaginatedScrapeJobListList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ScrapeJobList'
    PaginatedServiceList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Service'
    PaginatedShopList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Shop'
    PaginatedShopScheduleList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ShopSchedule'
    PaginatedStaffMemberList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/StaffMember'
    PaginatedSubscriptionHistoryList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/SubscriptionHistory'
    PaginatedSubscriptionPlanList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/SubscriptionPlan'
    PaginatedTimeSlotList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/TimeSlot'
    PatchedCalendarSettingsRequest:
      type: object
      description: Update sync preferences
      properties:
        google_calendar_id:
          type: string
          minLength: 1
          description: 'ID of the Google Calendar to sync to (default: "primary")'
          maxLength: 255
        is_sync_enabled:
          type: boolean
          description: Enable or disable automatic sync
    PatchedClientCreateUpdateRequest:
      type: object
      description: Serializer for creating/updating client profile
      properties:
        business_name:
          type: string
          minLength: 1
          maxLength: 255
        phone:
          type: string
          minLength: 1
          maxLength: 20
        business_address:
          type: string
        tax_id:
          type: string
          maxLength: 50
    PatchedDealCreateUpdateRequest:
      type: object
      description: Input serializer for creating/updating deals
      properties:
        shop_id:
          type: string
          format: uuid
          writeOnly: true
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        duration_minutes:
          type: integer
          maximum: 480
          minimum: 15
          default: 60
          description: Duration in minutes for deal booking slots (default 60)
        included_items:
          type: array
          items:
            type: string
            minLength: 1
            maxLength: 255
          description: List of services/items included in this deal
        is_active:
          type: boolean
    PatchedNotificationPreferenceRequest:
      type: object
      description: Serializer for user notification preferences.
      properties:
        email_booking_confirmation:
          type: boolean
          description: Receive email when booking is confirmed
        email_booking_cancellation:
          type: boolean
          description: Receive email when booking is cancelled
        email_booking_reschedule:
          type: boolean
          description: Receive email when booking is rescheduled
        email_booking_reminder:
          type: boolean
          description: Receive reminder emails before appointments
        email_staff_assignment:
          type: boolean
          description: Receive email when staff member is changed
        email_shop_holiday:
          type: boolean
          description: Receive email about shop holiday closures
        email_marketing:
          type: boolean
          description: Receive marketing and promotional emails
        push_enabled:
          type: boolean
          description: Enable in-app push notifications
    PatchedServiceCreateUpdateRequest:
      type: object
      description: Serializer for creating/updating services
      properties:
        shop_id:
          type: string
          format: uuid
          writeOnly: true
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        duration_minutes:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        buffer_minutes:
          type: integer
          maximum: 120
          minimum: 0
          default: 15
          description: Minimum time buffer (minutes) before earliest bookable slot
        is_active:
          type: boolean
        category:
          type: string
          maxLength: 100
    PatchedShopCreateUpdateRequest:
      type: object
      description: Serializer for creating/updating shops
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        address:
          type: string
          minLength: 1
          maxLength: 500
        city:
          type: string
          minLength: 1
          maxLength: 100
        state:
          type: string
          maxLength: 100
        postal_code:
          type: string
          minLength: 1
          maxLength: 20
        country:
          type: string
          minLength: 1
          maxLength: 100
        phone:
          type: string
          minLength: 1
          maxLength: 20
        email:
          type: string
          format: email
          maxLength: 254
        website:
          type: string
          format: uri
          maxLength: 200
        logo_url:
          type: string
          format: uri
          maxLength: 200
        cover_image_url:
          type: string
          description: Cover image URL or base64 encoded image. Accepts any string
            format until GCP bucket is implemented.
        timezone:
          type: string
          minLength: 1
          description: Shop timezone (IANA timezone, e.g., Asia/Karachi, Europe/London,
            America/Los_Angeles)
          maxLength: 63
        is_active:
          type: boolean
    PatchedStaffMemberCreateUpdateRequest:
      type: object
      description: Serializer for creating/updating staff members
      properties:
        shop_id:
          type: string
          format: uuid
          writeOnly: true
          description: UUID of the shop
        name:
          type: string
          minLength: 1
          maxLength: 255
        email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        phone:
          type: string
          maxLength: 20
        bio:
          type: string
        profile_image_url:
          type: string
          format: uri
          maxLength: 200
        is_active:
          type: boolean
        send_invite:
          type: boolean
          writeOnly: true
          default: true
          description: Send Clerk invitation email to staff member
    PatchedTimeSlotGenerateRequest:
      type: object
      description: Input serializer for generating time slots
      properties:
        shop_id:
          type: string
          format: uuid
        start_date:
          type: string
          format: date
        day_name:
          $ref: '#/components/schemas/DayNameEnum'
        start_time:
          type: string
          format: time
        end_time:
          type: string
          format: time
        staff_member_id:
          type: string
          format: uuid
          nullable: true
          description: 'Optional: Assign a specific staff member to this time slot'
        service_id:
          type: string
          format: uuid
          nullable: true
          description: 'Optional: Service this slot is for (validates staff assignment)'
    PatchedUserProfileUpdateRequest:
      type: object
      description: |-
        Serializer for updating user profile.
        Note: Phone and avatar are managed by Clerk, not stored in our DB.
      properties:
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
    Payment:
      type: object
      description: Serializer for Payment model.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        subscription:
          type: string
          format: uuid
          description: Subscription this payment is for
        subscription_plan:
          type: string
          readOnly: true
        user_email:
          type: string
          format: email
          readOnly: true
        amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Payment amount in USD
        payment_method:
          type: string
          description: Payment method type (e.g., 'card', 'bank_account')
          maxLength: 50
        transaction_id:
          type: string
          description: Unique transaction identifier
          maxLength: 255
        stripe_payment_intent_id:
          type: string
          description: Stripe Payment Intent ID (pi_xxx)
          maxLength: 255
        stripe_invoice_id:
          type: string
          description: Stripe Invoice ID (in_xxx)
          maxLength: 255
        status:
          type: string
          description: 'Payment status: succeeded, failed, pending, refunded'
          maxLength: 20
        payment_date:
          type: string
          format: date-time
          description: When payment was processed
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - amount
      - created_at
      - id
      - payment_date
      - payment_method
      - status
      - subscription
      - subscription_plan
      - transaction_id
      - user_email
    PaymentError:
      type: object
      description: Error response serializer for payment-info endpoint.
      properties:
        error:
          type: string
          description: Error message
        expired_at:
          type: string
          format: date-time
          description: When payment window expired (if applicable)
        message:
          type: string
          description: Additional user-friendly message
      required:
      - error
    PaymentInfo:
      type: object
      description: |-
        Payment information returned with booking creation.

        Included in the booking response to indicate whether payment is required
        and provide the client_secret for Stripe.js integration.
      properties:
        required:
          type: boolean
          description: Whether advance payment is required for this booking
        message:
          type: string
          description: Message about payment status or requirements
        client_secret:
          type: string
          description: Stripe PaymentIntent client secret for frontend payment processing
        payment_intent_id:
          type: string
          description: Stripe PaymentIntent ID
        amount:
          type: number
          format: double
          description: Advance payment amount in dollars
        amount_cents:
          type: integer
          description: Advance payment amount in cents
        currency:
          type: string
          description: Payment currency (e.g., 'usd')
      required:
      - message
      - required
    PaymentRetrieval:
      type: object
      description: |-
        Response serializer for retrieving payment info for an existing booking.
        Used by GET /bookings/{id}/payment-info/ endpoint.
      properties:
        booking_id:
          type: string
          format: uuid
          description: Booking ID
        client_secret:
          type: string
          description: Stripe PaymentIntent client secret for payment processing
        payment_intent_id:
          type: string
          description: Stripe PaymentIntent ID
        amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Advance payment amount
        currency:
          type: string
          description: Payment currency
        expires_at:
          type: string
          format: date-time
          description: When the payment window expires
        time_remaining_seconds:
          type: integer
          description: Seconds remaining in payment window
        can_pay:
          type: boolean
          description: True if payment window is still open
      required:
      - amount
      - booking_id
      - can_pay
      - client_secret
      - currency
      - expires_at
      - payment_intent_id
      - time_remaining_seconds
    ResendVerificationLinkRequest:
      type: object
      description: Serializer for resend verification link request
      properties:
        staff_id:
          type: string
          format: uuid
          description: UUID of the staff member
        email:
          type: string
          format: email
          minLength: 1
          description: Email address of the staff member (must match record)
      required:
      - email
      - staff_id
    ScrapeConfirmRequest:
      type: object
      description: |-
        Request serializer for confirming and creating shop from scrape job.

        Always requires shop data (either extracted or edited by owner).
        Pass the extracted data as-is or modify it before confirming.
      properties:
        shop:
          allOf:
          - $ref: '#/components/schemas/ExtractedShopDataRequest'
          description: Shop data (extracted or edited). Name is required.
        services:
          type: array
          items:
            $ref: '#/components/schemas/ExtractedServiceDataRequest'
          description: Services to create (pass extracted or edited list)
        schedule:
          type: array
          items:
            $ref: '#/components/schemas/ExtractedScheduleDataRequest'
          description: Schedule entries (pass extracted or edited list)
        deals:
          type: array
          items:
            $ref: '#/components/schemas/ExtractedDealDataRequest'
          description: Deals to create (pass extracted or edited list)
      required:
      - shop
    ScrapeConfirmResponse:
      type: object
      description: Response serializer for confirm endpoint
      properties:
        success:
          type: boolean
          description: Whether shop was created successfully
        message:
          type: string
          description: Status message
        job_id:
          type: string
          format: uuid
          description: Scrape job ID
        status:
          type: string
          description: Current job status
        services_count:
          type: integer
          description: Number of services to be created
        deals_count:
          type: integer
          description: Number of deals to be created
      required:
      - deals_count
      - job_id
      - message
      - services_count
      - status
      - success
    ScrapeJob:
      type: object
      description: Full response serializer for ScrapeJob with extracted data
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        url:
          type: string
          format: uri
          readOnly: true
          description: Source URL to scrape
        platform:
          type: string
          readOnly: true
          description: Detected platform (google, yelp, booksy, etc.) or empty for
            generic
        status:
          allOf:
          - $ref: '#/components/schemas/Status67cEnum'
          readOnly: true
        extracted_data:
          allOf:
          - $ref: '#/components/schemas/ExtractedData'
          readOnly: true
        error_message:
          type: string
          readOnly: true
          description: Error message if scraping failed
        shop_id:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        shop_name:
          type: string
          readOnly: true
          nullable: true
        client_email:
          type: string
          format: email
          readOnly: true
        scraping_count:
          type: integer
          readOnly: true
        scraping_limit:
          type: integer
          readOnly: true
        scraping_remaining:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - client_email
      - created_at
      - error_message
      - extracted_data
      - id
      - platform
      - scraping_count
      - scraping_limit
      - scraping_remaining
      - shop_id
      - shop_name
      - status
      - updated_at
      - url
    ScrapeJobList:
      type: object
      description: Compact serializer for listing scrape jobs
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        url:
          type: string
          format: uri
          description: Source URL to scrape
          maxLength: 2000
        platform:
          type: string
          description: Detected platform (google, yelp, booksy, etc.) or empty for
            generic
          maxLength: 50
        status:
          $ref: '#/components/schemas/Status67cEnum'
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - url
    ScrapeSubmitRequest:
      type: object
      description: Request serializer for submitting a URL to scrape
      properties:
        url:
          type: string
          format: uri
          minLength: 1
          description: URL of the salon website to scrape
          maxLength: 2000
      required:
      - url
    ScrapeSubmitResponse:
      type: object
      description: Response serializer for submit endpoint
      properties:
        id:
          type: string
          format: uuid
          description: Scrape job ID
        url:
          type: string
          format: uri
          description: URL being scraped
        platform:
          type: string
          description: Detected platform (google_business, yelp, generic, etc.)
        status:
          type: string
          description: Job status (pending, scraping, parsing, completed, failed)
        scraping_count:
          type: integer
          description: Number of completed scrape jobs
        scraping_limit:
          type: integer
          description: Maximum allowed scrape jobs
        scraping_remaining:
          type: integer
          description: Remaining scraping quota
        created_at:
          type: string
          format: date-time
          description: Job creation time
      required:
      - created_at
      - id
      - platform
      - scraping_count
      - scraping_limit
      - scraping_remaining
      - status
      - url
    ScrapingLimitError:
      type: object
      description: Response serializer for scraping limit exceeded error
      properties:
        error:
          type: string
          description: Error message
        scraping_count:
          type: integer
          description: Number of completed scrape jobs
        scraping_limit:
          type: integer
          description: Maximum allowed scrape jobs
        scraping_remaining:
          type: integer
          description: Remaining scraping quota (always 0)
      required:
      - error
      - scraping_count
      - scraping_limit
      - scraping_remaining
    ScrapingLimitsResponse:
      type: object
      description: Response serializer for GET /limits/ endpoint
      properties:
        scraping_count:
          type: integer
          description: Number of completed scrape jobs
        scraping_limit:
          type: integer
          description: Maximum allowed scrape jobs
        scraping_remaining:
          type: integer
          description: Remaining scraping quota
      required:
      - scraping_count
      - scraping_limit
      - scraping_remaining
    Service:
      type: object
      description: Serializer for Service model
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        shop:
          type: string
          format: uuid
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        name:
          type: string
          maxLength: 255
        description:
          type: string
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        duration_minutes:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        buffer_minutes:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Minimum time buffer between now and earliest bookable slot
            (0 = no buffer)
        category:
          type: string
          maxLength: 100
        image_url:
          type: string
          format: uri
          maxLength: 200
        is_active:
          type: boolean
        booking_count:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        assigned_staff:
          type: array
          items:
            $ref: '#/components/schemas/ServiceStaff'
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - assigned_staff
      - created_at
      - duration_minutes
      - id
      - name
      - price
      - shop
      - shop_name
      - updated_at
    ServiceCreateUpdateRequest:
      type: object
      description: Serializer for creating/updating services
      properties:
        shop_id:
          type: string
          format: uuid
          writeOnly: true
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        duration_minutes:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        buffer_minutes:
          type: integer
          maximum: 120
          minimum: 0
          default: 15
          description: Minimum time buffer (minutes) before earliest bookable slot
        is_active:
          type: boolean
        category:
          type: string
          maxLength: 100
      required:
      - duration_minutes
      - name
      - price
    ServiceDeleteError:
      type: object
      description: Detailed error when service deletion is blocked by active bookings
      properties:
        error:
          type: string
          description: Error type code
        active_bookings_count:
          type: integer
          description: Number of active bookings
        message:
          type: string
          description: User-friendly error message
        next_booking:
          type: object
          additionalProperties: {}
          description: Details of the next upcoming booking
      required:
      - active_bookings_count
      - error
      - message
      - next_booking
    ServiceStaff:
      type: object
      description: Serializer for staff members assigned to a service
      properties:
        staff_id:
          type: string
          format: uuid
          readOnly: true
        staff_name:
          type: string
          readOnly: true
        is_primary:
          type: boolean
          readOnly: true
      required:
      - is_primary
      - staff_id
      - staff_name
    Shop:
      type: object
      description: Basic shop serializer
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        client:
          type: string
          format: uuid
          readOnly: true
        client_name:
          type: string
          readOnly: true
        name:
          type: string
          maxLength: 255
        description:
          type: string
        address:
          type: string
          maxLength: 500
        city:
          type: string
          maxLength: 100
        state:
          type: string
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        country:
          type: string
          maxLength: 100
        phone:
          type: string
          maxLength: 20
        email:
          type: string
          format: email
          maxLength: 254
        website:
          type: string
          format: uri
          maxLength: 200
        logo_url:
          type: string
          format: uri
          maxLength: 200
        cover_image_url:
          type: string
          description: Cover image URL or base64 encoded image. Accepts any string
            format until GCP bucket is implemented.
        timezone:
          type: string
          description: Shop timezone (IANA timezone, e.g., Asia/Karachi, Europe/London,
            America/Los_Angeles)
          maxLength: 63
        is_active:
          type: boolean
        services_count:
          type: integer
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - address
      - city
      - client
      - client_name
      - created_at
      - id
      - name
      - phone
      - postal_code
      - services_count
      - updated_at
    ShopCreateUpdateRequest:
      type: object
      description: Serializer for creating/updating shops
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        address:
          type: string
          minLength: 1
          maxLength: 500
        city:
          type: string
          minLength: 1
          maxLength: 100
        state:
          type: string
          maxLength: 100
        postal_code:
          type: string
          minLength: 1
          maxLength: 20
        country:
          type: string
          minLength: 1
          maxLength: 100
        phone:
          type: string
          minLength: 1
          maxLength: 20
        email:
          type: string
          format: email
          maxLength: 254
        website:
          type: string
          format: uri
          maxLength: 200
        logo_url:
          type: string
          format: uri
          maxLength: 200
        cover_image_url:
          type: string
          description: Cover image URL or base64 encoded image. Accepts any string
            format until GCP bucket is implemented.
        timezone:
          type: string
          minLength: 1
          description: Shop timezone (IANA timezone, e.g., Asia/Karachi, Europe/London,
            America/Los_Angeles)
          maxLength: 63
        is_active:
          type: boolean
      required:
      - address
      - city
      - name
      - phone
      - postal_code
    ShopDetail:
      type: object
      description: Detailed shop serializer with services
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        client:
          type: string
          format: uuid
          readOnly: true
        client_name:
          type: string
          readOnly: true
        name:
          type: string
          maxLength: 255
        description:
          type: string
        address:
          type: string
          maxLength: 500
        city:
          type: string
          maxLength: 100
        state:
          type: string
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        country:
          type: string
          maxLength: 100
        phone:
          type: string
          maxLength: 20
        email:
          type: string
          format: email
          maxLength: 254
        website:
          type: string
          format: uri
          maxLength: 200
        logo_url:
          type: string
          format: uri
          maxLength: 200
        cover_image_url:
          type: string
          description: Cover image URL or base64 encoded image. Accepts any string
            format until GCP bucket is implemented.
        timezone:
          type: string
          description: Shop timezone (IANA timezone, e.g., Asia/Karachi, Europe/London,
            America/Los_Angeles)
          maxLength: 63
        is_active:
          type: boolean
        services_count:
          type: integer
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        services:
          type: array
          items: {}
          readOnly: true
      required:
      - address
      - city
      - client
      - client_name
      - created_at
      - id
      - name
      - phone
      - postal_code
      - services
      - services_count
      - updated_at
    ShopEarnings:
      type: object
      description: Earnings breakdown for a single shop
      properties:
        shop_id:
          type: string
          format: uuid
          description: Shop UUID
        shop_name:
          type: string
          description: Shop name
        total_bookings:
          type: integer
          description: Total number of bookings
        completed_bookings:
          type: integer
          description: Number of completed bookings
        total_earnings:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Total earnings from completed bookings
        total_advance_payments:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Total advance payments received (deposits)
      required:
      - completed_bookings
      - shop_id
      - shop_name
      - total_advance_payments
      - total_bookings
      - total_earnings
    ShopHours:
      type: object
      description: Serializer for shop hours information.
      properties:
        start_time:
          type: string
          format: time
        end_time:
          type: string
          format: time
        slot_duration_minutes:
          type: integer
        day_of_week:
          type: string
      required:
      - day_of_week
      - end_time
      - slot_duration_minutes
      - start_time
    ShopSchedule:
      type: object
      description: Serializer for ShopSchedule model
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        shop:
          type: string
          format: uuid
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        day_of_week:
          $ref: '#/components/schemas/DayNameEnum'
        start_time:
          type: string
          format: time
        end_time:
          type: string
          format: time
        slot_duration_minutes:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        is_active:
          type: boolean
        next_occurrence:
          type: string
          format: date
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - day_of_week
      - end_time
      - id
      - next_occurrence
      - shop
      - shop_name
      - start_time
      - updated_at
    StaffDeleteError:
      type: object
      description: Detailed error when staff member deletion is blocked by active
        bookings
      properties:
        error:
          type: string
          description: Error type code
        active_bookings_count:
          type: integer
          description: Number of active bookings
        message:
          type: string
          description: User-friendly error message
        action_required:
          type: string
          description: Instructions for next steps
        bookings_to_reassign:
          type: array
          items:
            type: object
            additionalProperties: {}
          description: List of upcoming bookings that need reassignment
        showing_first:
          type: integer
          description: Number of bookings shown in the list
      required:
      - action_required
      - active_bookings_count
      - bookings_to_reassign
      - error
      - message
      - showing_first
    StaffMember:
      type: object
      description: Serializer for reading staff member data
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        shop:
          type: string
          format: uuid
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        name:
          type: string
          maxLength: 255
        email:
          type: string
          format: email
          maxLength: 254
        phone:
          type: string
          maxLength: 20
        bio:
          type: string
        profile_image_url:
          type: string
          format: uri
          maxLength: 200
        is_active:
          type: boolean
        invite_status:
          allOf:
          - $ref: '#/components/schemas/InviteStatusEnum'
          readOnly: true
        invite_sent_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        invite_accepted_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        assigned_services:
          type: array
          items:
            $ref: '#/components/schemas/StaffService'
          readOnly: true
        total_bookings:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - assigned_services
      - created_at
      - email
      - id
      - invite_accepted_at
      - invite_sent_at
      - invite_status
      - name
      - shop
      - shop_name
      - total_bookings
      - updated_at
    StaffMemberCreateUpdateRequest:
      type: object
      description: Serializer for creating/updating staff members
      properties:
        shop_id:
          type: string
          format: uuid
          writeOnly: true
          description: UUID of the shop
        name:
          type: string
          minLength: 1
          maxLength: 255
        email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        phone:
          type: string
          maxLength: 20
        bio:
          type: string
        profile_image_url:
          type: string
          format: uri
          maxLength: 200
        is_active:
          type: boolean
        send_invite:
          type: boolean
          writeOnly: true
          default: true
          description: Send Clerk invitation email to staff member
      required:
      - email
      - name
      - shop_id
    StaffMemberDetail:
      type: object
      description: Detailed serializer with full service information
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        shop_id:
          type: string
          format: uuid
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        name:
          type: string
          maxLength: 255
        email:
          type: string
          format: email
          maxLength: 254
        phone:
          type: string
          maxLength: 20
        bio:
          type: string
        profile_image_url:
          type: string
          format: uri
          maxLength: 200
        is_active:
          type: boolean
        invite_status:
          $ref: '#/components/schemas/InviteStatusEnum'
        invite_sent_at:
          type: string
          format: date-time
          nullable: true
        invite_accepted_at:
          type: string
          format: date-time
          nullable: true
        has_account:
          type: string
          readOnly: true
        assigned_services:
          type: array
          items:
            $ref: '#/components/schemas/StaffService'
          readOnly: true
        total_bookings:
          type: string
          readOnly: true
        recent_bookings_count:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - assigned_services
      - created_at
      - email
      - has_account
      - id
      - name
      - recent_bookings_count
      - shop_id
      - shop_name
      - total_bookings
      - updated_at
    StaffMemberRequest:
      type: object
      description: Serializer for reading staff member data
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        phone:
          type: string
          maxLength: 20
        bio:
          type: string
        profile_image_url:
          type: string
          format: uri
          maxLength: 200
        is_active:
          type: boolean
      required:
      - email
      - name
    StaffReassignRequest:
      type: object
      description: |-
        Serializer for shop owner to reassign staff for a booking.

        Validates that:
        - Cannot reassign to the same staff member
        - Staff member exists and is active
        - Staff member belongs to the same shop
        - Staff member can provide the service
        - Staff member is available at the booking time (no clashes)
      properties:
        staff_member_id:
          type: string
          format: uuid
          description: UUID of the new staff member to assign. Cannot be the same
            as current staff.
      required:
      - staff_member_id
    StaffService:
      type: object
      description: Serializer for staff-service relationship
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        service_id:
          type: string
          format: uuid
          readOnly: true
        service_name:
          type: string
          readOnly: true
        service_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        is_primary:
          type: boolean
      required:
      - id
      - service_id
      - service_name
      - service_price
    StaffServiceAssignmentRequest:
      type: object
      description: Serializer for assigning/removing services to/from staff
      properties:
        service_ids:
          type: array
          items:
            type: string
            format: uuid
          description: List of service IDs to assign to this staff member
        is_primary:
          type: boolean
          default: false
          description: Set as primary staff for these services
      required:
      - service_ids
    StaffServiceRequest:
      type: object
      description: Serializer for staff-service relationship
      properties:
        is_primary:
          type: boolean
    Status67cEnum:
      enum:
      - pending
      - scraping
      - parsing
      - completed
      - creating
      - confirmed
      - failed
      type: string
      description: |-
        * `pending` - Pending
        * `scraping` - Scraping
        * `parsing` - Parsing with AI
        * `completed` - Completed
        * `creating` - Creating Shop
        * `confirmed` - Shop Created
        * `failed` - Failed
    Status728Enum:
      enum:
      - pending
      - confirmed
      - cancelled
      - completed
      - no_show
      type: string
      description: |-
        * `pending` - Pending
        * `confirmed` - Confirmed
        * `cancelled` - Cancelled
        * `completed` - Completed
        * `no_show` - No Show
    StripePriceImportRequest:
      type: object
      description: Serializer for importing subscription plans from Stripe.
      properties:
        stripe_price_id:
          type: string
          minLength: 1
          description: Stripe Price ID (e.g. price_1234)
          maxLength: 255
        name:
          type: string
          description: 'Optional: Custom name for the plan (overrides Stripe product
            name)'
          maxLength: 255
      required:
      - stripe_price_id
    SubscriptionCancelRequest:
      type: object
      description: Serializer for cancel subscription request.
      properties:
        reason:
          type: string
          description: Optional reason for cancellation
          maxLength: 500
        immediate:
          type: boolean
          default: false
          description: Cancel immediately (True) or at period end (False)
    SubscriptionHistory:
      type: object
      description: Serializer for subscription history records.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        action:
          type: string
          description: 'Action: created, upgraded, downgraded, cancelled, renewed,
            expired'
          maxLength: 20
        old_plan_name:
          type: string
          readOnly: true
          nullable: true
        new_plan_name:
          type: string
          readOnly: true
          nullable: true
        changed_by_email:
          type: string
          format: email
          readOnly: true
          nullable: true
        reason:
          type: string
          description: Reason for the change
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - action
      - changed_by_email
      - created_at
      - id
      - new_plan_name
      - old_plan_name
    SubscriptionPlan:
      type: object
      description: |-
        Serializer for SubscriptionPlan model.
        Used for displaying available subscription tiers.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          description: Plan name (e.g., 'Starter', 'Professional', 'Enterprise')
          maxLength: 50
        stripe_price_id:
          type: string
          description: Stripe Price ID (price_xxx)
          maxLength: 255
        stripe_product_id:
          type: string
          description: Stripe Product ID (prod_xxx)
          maxLength: 255
        amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Monthly price in USD (used for tier comparison)
        billing_period:
          type: string
          description: Billing frequency (month or year)
          maxLength: 10
        description:
          type: string
          description: Plan description for frontend display
        features:
          description: List of features included in this plan
        is_active:
          type: boolean
          description: Whether users can subscribe to this plan
        is_popular:
          type: boolean
          description: Show 'Most Popular' badge
        display_order:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Order for frontend display (lower = higher priority)
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - amount
      - created_at
      - id
      - name
      - stripe_price_id
      - stripe_product_id
      - updated_at
    SubscriptionPlanRequest:
      type: object
      description: |-
        Serializer for SubscriptionPlan model.
        Used for displaying available subscription tiers.
      properties:
        name:
          type: string
          minLength: 1
          description: Plan name (e.g., 'Starter', 'Professional', 'Enterprise')
          maxLength: 50
        stripe_price_id:
          type: string
          minLength: 1
          description: Stripe Price ID (price_xxx)
          maxLength: 255
        stripe_product_id:
          type: string
          minLength: 1
          description: Stripe Product ID (prod_xxx)
          maxLength: 255
        amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Monthly price in USD (used for tier comparison)
        billing_period:
          type: string
          minLength: 1
          description: Billing frequency (month or year)
          maxLength: 10
        description:
          type: string
          description: Plan description for frontend display
        features:
          description: List of features included in this plan
        is_active:
          type: boolean
          description: Whether users can subscribe to this plan
        is_popular:
          type: boolean
          description: Show 'Most Popular' badge
        display_order:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Order for frontend display (lower = higher priority)
      required:
      - amount
      - name
      - stripe_price_id
      - stripe_product_id
    SubscriptionRequest:
      type: object
      description: |-
        Serializer for Subscription model.
        Includes plan details and computed fields.
      properties:
        status:
          type: string
          minLength: 1
          description: 'Subscription status: active, past_due, canceled, unpaid'
          maxLength: 20
        is_current:
          type: boolean
          description: Whether this is the user's current active subscription
        current_period_start:
          type: string
          format: date-time
          description: Current billing period start
        current_period_end:
          type: string
          format: date-time
          description: Current billing period end
        cancel_at_period_end:
          type: boolean
          description: Whether subscription will cancel at period end
        cancelled_at:
          type: string
          format: date-time
          nullable: true
          description: When subscription was cancelled
      required:
      - current_period_end
      - current_period_start
      - status
    SubscriptionStatusEnum:
      enum:
      - active
      - past_due
      - canceled
      - unpaid
      - trialing
      type: string
      description: |-
        * `active` - Active
        * `past_due` - Past Due
        * `canceled` - Canceled
        * `unpaid` - Unpaid
        * `trialing` - Trialing
    SuccessResponse:
      type: object
      description: Standard success response with message
      properties:
        success:
          type: boolean
          default: true
        message:
          type: string
      required:
      - message
    TestEmailNotificationTypeEnum:
      enum:
      - booking_confirmation
      - booking_reminder
      - booking_cancellation
      type: string
      description: |-
        * `booking_confirmation` - Booking Confirmation
        * `booking_reminder` - Booking Reminder
        * `booking_cancellation` - Booking Cancellation
    TestEmailRequest:
      type: object
      description: Input serializer for sending test emails.
      properties:
        email:
          type: string
          format: email
          minLength: 1
          description: Email address to send test to. Defaults to current user email.
        notification_type:
          allOf:
          - $ref: '#/components/schemas/TestEmailNotificationTypeEnum'
          default: booking_confirmation
          description: |-
            Type of test email to send

            * `booking_confirmation` - Booking Confirmation
            * `booking_reminder` - Booking Reminder
            * `booking_cancellation` - Booking Cancellation
    TestEmailResponse:
      type: object
      description: Response serializer for test email.
      properties:
        success:
          type: boolean
          description: Whether the email was sent successfully
        message:
          type: string
          description: Result message
        email:
          type: string
          format: email
          description: Email address sent to
      required:
      - email
      - message
      - success
    TimeSlot:
      type: object
      description: Serializer for TimeSlot model
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        schedule:
          type: string
          format: uuid
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        start_datetime:
          type: string
          format: date-time
        end_datetime:
          type: string
          format: date-time
        duration_minutes:
          type: integer
          readOnly: true
        status:
          $ref: '#/components/schemas/TimeSlotStatusEnum'
        staff_member:
          type: string
          format: uuid
          nullable: true
          description: Staff member pre-assigned to this time slot
        staff_member_name:
          type: string
          readOnly: true
          nullable: true
        is_available:
          type: boolean
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - duration_minutes
      - end_datetime
      - id
      - is_available
      - schedule
      - shop_name
      - staff_member_name
      - start_datetime
      - updated_at
    TimeSlotBlockRequest:
      type: object
      description: Input serializer for blocking/unblocking time slots
      properties:
        reason:
          type: string
    TimeSlotGenerateRequest:
      type: object
      description: Input serializer for generating time slots
      properties:
        shop_id:
          type: string
          format: uuid
        start_date:
          type: string
          format: date
        day_name:
          $ref: '#/components/schemas/DayNameEnum'
        start_time:
          type: string
          format: time
        end_time:
          type: string
          format: time
        staff_member_id:
          type: string
          format: uuid
          nullable: true
          description: 'Optional: Assign a specific staff member to this time slot'
        service_id:
          type: string
          format: uuid
          nullable: true
          description: 'Optional: Service this slot is for (validates staff assignment)'
      required:
      - day_name
      - end_time
      - shop_id
      - start_date
      - start_time
    TimeSlotGenerateResponse:
      type: object
      description: Output serializer for time slot generation response
      properties:
        message:
          type: string
        slots_created:
          type: integer
        date_range:
          type: object
          additionalProperties: {}
      required:
      - date_range
      - message
      - slots_created
    TimeSlotStatusEnum:
      enum:
      - available
      - booked
      - blocked
      type: string
      description: |-
        * `available` - Available
        * `booked` - Booked
        * `blocked` - Blocked
    TokensUsed:
      type: object
      description: Serializer for token usage.
      properties:
        prompt:
          type: integer
          description: Number of prompt tokens used
        completion:
          type: integer
          description: Number of completion tokens used
      required:
      - completion
      - prompt
    User:
      type: object
      description: |-
        User serializer for API responses.
        Includes real-time fields fetched from Clerk API.
      properties:
        clerk_user_id:
          type: string
          readOnly: true
        email:
          type: string
          format: email
          readOnly: true
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
        full_name:
          type: string
          readOnly: true
        phone:
          type: string
          readOnly: true
        avatar_url:
          type: string
          format: uri
          readOnly: true
        role:
          $ref: '#/components/schemas/UserRoleEnum'
        is_active:
          type: boolean
        email_verified:
          type: boolean
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - avatar_url
      - clerk_user_id
      - created_at
      - email
      - email_verified
      - full_name
      - phone
    UserProfileUpdateRequest:
      type: object
      description: |-
        Serializer for updating user profile.
        Note: Phone and avatar are managed by Clerk, not stored in our DB.
      properties:
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
    UserRegistrationRequest:
      type: object
      description: Serializer for user role selection
      properties:
        role:
          $ref: '#/components/schemas/UserRegistrationRoleEnum'
      required:
      - role
    UserRegistrationRoleEnum:
      enum:
      - client
      - customer
      type: string
      description: |-
        * `client` - client
        * `customer` - customer
    UserRoleEnum:
      enum:
      - customer
      - client
      - staff
      type: string
      description: |-
        * `customer` - Customer
        * `client` - Shop Owner
        * `staff` - Staff
    WidgetConfiguration:
      type: object
      description: Output serializer for widget configuration
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        shop:
          type: string
          format: uuid
          readOnly: true
          description: Shop this widget configuration belongs to
        shop_id:
          type: string
          format: uuid
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        layout:
          allOf:
          - $ref: '#/components/schemas/WidgetConfigurationLayoutEnum'
          description: |-
            Widget layout style

            * `card` - Card
            * `landscape` - Landscape
            * `minimal` - Minimal
        primary_color:
          type: string
          description: 'Primary color in hex format (e.g., #2563EB)'
          maxLength: 7
        widget_width:
          type: integer
          maximum: 800
          minimum: 280
          description: Widget width in pixels (280-800)
        border_radius:
          type: integer
          maximum: 50
          minimum: 0
          description: Border radius in pixels (0-50)
        banner_image_url:
          type: string
          description: Banner image URL (overrides shop cover image)
        custom_title:
          type: string
          description: Custom title (defaults to shop name if empty)
          maxLength: 255
        custom_description:
          type: string
          description: Custom description (defaults to shop description if empty)
        button_text:
          type: string
          description: Call-to-action button text
          maxLength: 50
        logo_url:
          type: string
          description: Custom logo URL (overrides shop logo if provided)
        show_logo:
          type: boolean
          description: Display logo in widget
        text_align:
          allOf:
          - $ref: '#/components/schemas/WidgetConfigurationTextAlignEnum'
          description: |-
            Text alignment for widget content

            * `left` - Left
            * `center` - Center
            * `right` - Right
        display_title:
          type: string
          readOnly: true
        display_description:
          type: string
          readOnly: true
        display_logo:
          type: string
          readOnly: true
        is_active:
          type: boolean
          description: Widget is active and can be embedded
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        embed_code:
          type: string
          readOnly: true
      required:
      - created_at
      - display_description
      - display_logo
      - display_title
      - embed_code
      - id
      - shop
      - shop_id
      - shop_name
      - updated_at
    WidgetConfigurationLayoutEnum:
      enum:
      - card
      - landscape
      - minimal
      type: string
      description: |-
        * `card` - Card
        * `landscape` - Landscape
        * `minimal` - Minimal
    WidgetConfigurationTextAlignEnum:
      enum:
      - left
      - center
      - right
      type: string
      description: |-
        * `left` - Left
        * `center` - Center
        * `right` - Right
    WidgetPreviewRequestLayoutEnum:
      enum:
      - card
      - landscape
      - minimal
      type: string
      description: |-
        * `card` - card
        * `landscape` - landscape
        * `minimal` - minimal
    WidgetPreviewRequestRequest:
      type: object
      description: Input serializer for preview endpoint - allows temporary settings
      properties:
        layout:
          allOf:
          - $ref: '#/components/schemas/WidgetPreviewRequestLayoutEnum'
          description: |-
            Temporary layout to preview

            * `card` - card
            * `landscape` - landscape
            * `minimal` - minimal
        primary_color:
          type: string
          minLength: 1
          description: Temporary primary color to preview (hex format)
        widget_width:
          type: integer
          description: Temporary widget width to preview
        border_radius:
          type: integer
          description: Temporary border radius to preview
        show_logo:
          type: boolean
          description: Temporarily show/hide logo
        text_align:
          allOf:
          - $ref: '#/components/schemas/WidgetPreviewRequestTextAlignEnum'
          description: |-
            Temporary text alignment to preview

            * `left` - left
            * `center` - center
            * `right` - right
        button_text:
          type: string
          minLength: 1
          description: Temporary button text to preview
          maxLength: 50
    WidgetPreviewRequestTextAlignEnum:
      enum:
      - left
      - center
      - right
      type: string
      description: |-
        * `left` - left
        * `center` - center
        * `right` - right
    WidgetPreviewResponse:
      type: object
      description: Output serializer for preview data
      properties:
        preview_url:
          type: string
          format: uri
          description: URL to preview the widget with temporary settings
        preview_html:
          type: string
          description: HTML preview of the widget with applied settings
        settings:
          type: object
          additionalProperties: {}
          description: Combined settings (saved + temporary) used for preview
      required:
      - preview_html
      - preview_url
      - settings
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: 'Production: Clerk JWT token from Authorization header'
    ClerkUserAuth:
      type: apiKey
      in: header
      name: X-Clerk-User-ID
      description: 'Development/Testing: Enter your clerk_user_id (e.g., user_2abc123...)'
tags:
- name: Authentication
  description: User endpoints (Clerk-authenticated)
- name: System
  description: System health and status
- name: Shops - Public
  description: Public shop discovery and search
- name: Shops - Client
  description: Salon owner shop management
- name: Widget - Client
  description: Shop owner widget configuration management
- name: Services - Public
  description: Public service browsing
- name: Services - Client
  description: Salon owner service management
- name: Staff - Public
  description: Public staff member browsing
- name: Staff - Client
  description: Salon owner staff management
- name: Staff Dashboard
  description: Staff member self-service dashboard
- name: Schedules - Client
  description: Salon owner schedule management
- name: Schedules - Public
  description: Public availability checking
- name: Bookings - Customer
  description: Customer booking management
- name: Bookings - Client
  description: Salon owner booking management
- name: Subscriptions - Public
  description: Public subscription plan browsing
- name: Subscriptions - Client
  description: Client subscription management
- name: Subscriptions - Admin
  description: Admin subscription plan management
- name: Calendars
  description: Google Calendar integration for booking sync
- name: AI Agent
  description: AI-powered chat assistant for booking and shop management
- name: Scraper
  description: Website scraping for shop creation from URLs
